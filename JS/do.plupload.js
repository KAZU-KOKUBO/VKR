"use strict";(self.webpackChunkdo=self.webpackChunkdo||[]).push([[808],{1504:(e,t,n)=>{var r,s,a,o,l;function d(e,t){if(this.fileProgressID=e.id,this.opacity=100,this.height=0,this.fileProgressWrapper=document.getElementById(this.fileProgressID),this.fileProgressWrapper)this.fileProgressElement=this.fileProgressWrapper.firstChild,this.reset();else{this.fileProgressWrapper=document.createElement("div"),this.fileProgressWrapper.className="progressWrapper",this.fileProgressWrapper.id=this.fileProgressID,this.fileProgressElement=document.createElement("div"),this.fileProgressElement.className="progressContainer";var i=document.createElement("a");i.className="progressCancel",i.href="#",i.style.visibility="hidden",i.appendChild(document.createTextNode(" "));var n=document.createElement("div");n.className="progressName",n.appendChild(document.createTextNode(e.name));var r=document.createElement("div");r.className="progressBarInProgress";var s=document.createElement("div");s.className="progressBarStatus",s.innerHTML="&nbsp;",this.fileProgressElement.appendChild(i),this.fileProgressElement.appendChild(n),this.fileProgressElement.appendChild(s),this.fileProgressElement.appendChild(r),this.fileProgressWrapper.appendChild(this.fileProgressElement);var a=document.getElementById(t);a.appendChild(this.fileProgressWrapper),a.classList.remove("is-removed")}this.height=this.fileProgressWrapper.offsetHeight,this.setTimer(null)}n.r(t),n.d(t,{default:()=>u}),function(){var e,t,i=0,n=[],r={},s={},a={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},o=/[<>&\"\']/g,l=window.setTimeout,d={};function u(){this.returnValue=!1}function c(){this.cancelBubble=!0}!function(e){var t,i,n,r="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe".split(/,/);for(t=0;t<r.length;t+=2)for(n=r[t+1].split(/ /),i=0;i<n.length;i++)s[n[i]]=r[t]}();var p,g,f,h,m,v,E={VERSION:"@@version@@",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:s,ua:(h=navigator,m=h.userAgent,v=h.vendor,f=(p=/WebKit/.test(m))&&-1!==v.indexOf("Apple"),g=window.opera&&window.opera.buildNumber,{windows:-1!==navigator.platform.indexOf("Win"),android:/Android/.test(m),ie:!p&&!g&&/MSIE/gi.test(m)&&/Explorer/gi.test(h.appName),webkit:p,gecko:!p&&/Gecko/.test(m),safari:f,opera:!!g}),typeOf:function(e){return{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(e){return E.each(arguments,(function(t,i){i>0&&E.each(t,(function(t,i){e[i]=t}))})),e},cleanName:function(e){var t,i;for(i=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],t=0;t<i.length;t+=2)e=e.replace(i[t],i[t+1]);return e=(e=e.replace(/\s+/g,"_")).replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(e,t){return t.name=e,n[e]=t,n.push(t),t},guid:function(){var e,t=(new Date).getTime().toString(32);for(e=0;e<5;e++)t+=Math.floor(65535*Math.random()).toString(32);return(E.guidPrefix||"p")+t+(i++).toString(32)},buildUrl:function(e,t){var i="";return E.each(t,(function(e,t){i+=(i?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)})),i&&(e+=(e.indexOf("?")>0?"&":"?")+i),e},each:function(t,i){var n,r,s;if(t)if((n=t.length)===e){for(r in t)if(t.hasOwnProperty(r)&&!1===i(t[r],r))return}else for(s=0;s<n;s++)if(!1===i(t[s],s))return},formatSize:function(t){return t===e||/\D/.test(t)?E.translate("N/A"):t>1073741824?Math.round(t/1073741824,1)+" GB":t>1048576?Math.round(t/1048576,1)+" MB":t>1024?Math.round(t/1024,1)+" KB":t+" b"},getPos:function(e,t){var i,n,r,s=0,a=0,o=document;function l(e){var t,i,n=0,r=0;return e&&(i=e.getBoundingClientRect(),t="CSS1Compat"===o.compatMode?o.documentElement:o.body,n=i.left+t.scrollLeft,r=i.top+t.scrollTop),{x:n,y:r}}if(t=t||o.body,e&&e.getBoundingClientRect&&E.ua.ie&&(!o.documentMode||o.documentMode<8))return n=l(e),r=l(t),{x:n.x-r.x,y:n.y-r.y};for(i=e;i&&i!=t&&i.nodeType;)s+=i.offsetLeft||0,a+=i.offsetTop||0,i=i.offsetParent;for(i=e.parentNode;i&&i!=t&&i.nodeType;)s-=i.scrollLeft||0,a-=i.scrollTop||0,i=i.parentNode;return{x:s,y:a}},getSize:function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}},parseSize:function(e){var t;return"string"==typeof e&&(t=(e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,"")))[2],e=+e[1],"g"==t&&(e*=1073741824),"m"==t&&(e*=1048576),"k"==t&&(e*=1024)),e},xmlEncode:function(e){return e?(""+e).replace(o,(function(e){return a[e]?"&"+a[e]+";":e})):e},toArray:function(e){var t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i},inArray:function(e,t){if(t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i}return-1},addI18n:function(e){return E.extend(r,e)},translate:function(e){return r[e]||e},isEmptyObj:function(t){if(t===e)return!0;for(var i in t)return!1;return!0},hasClass:function(e,t){return""!=e.className&&new RegExp("(^|\\s+)"+t+"(\\s+|$)").test(e.className)},addClass:function(e,t){E.hasClass(e,t)||(e.className=""==e.className?t:e.className.replace(/\s+$/,"")+" "+t)},removeClass:function(e,t){var i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(i,(function(e,t,i){return" "===t&&" "===i?" ":""}))},getStyle:function(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null)[t]:void 0},addEvent:function(i,n,r){var s,a,o;o=arguments[3],n=n.toLowerCase(),t===e&&(t="Plupload_"+E.guid()),i.addEventListener?(s=r,i.addEventListener(n,s,!1)):i.attachEvent&&(s=function(){var e=window.event;e.target||(e.target=e.srcElement),e.preventDefault=u,e.stopPropagation=c,r(e)},i.attachEvent("on"+n,s)),i[t]===e&&(i[t]=E.guid()),d.hasOwnProperty(i[t])||(d[i[t]]={}),(a=d[i[t]]).hasOwnProperty(n)||(a[n]=[]),a[n].push({func:s,orig:r,key:o})},removeEvent:function(i,n){var r,s,a;if("function"==typeof arguments[2]?s=arguments[2]:a=arguments[2],n=n.toLowerCase(),i[t]&&d[i[t]]&&d[i[t]][n]){for(var o=(r=d[i[t]][n]).length-1;o>=0&&(r[o].key!==a&&r[o].orig!==s||(i.removeEventListener?i.removeEventListener(n,r[o].func,!1):i.detachEvent&&i.detachEvent("on"+n,r[o].func),r[o].orig=null,r[o].func=null,r.splice(o,1),s===e));o--);if(r.length||delete d[i[t]][n],E.isEmptyObj(d[i[t]])){delete d[i[t]];try{delete i[t]}catch(n){i[t]=e}}}},removeAllEvents:function(i){var n=arguments[1];i[t]!==e&&i[t]&&E.each(d[i[t]],(function(e,t){E.removeEvent(i,t,n)}))}};E.Uploader=function(t){var i,r,s={},a=[],o=!1;function d(){var e,t,i=0;if(this.state==E.STARTED){for(t=0;t<a.length;t++)e||a[t].status!=E.QUEUED?i++:((e=a[t]).status=E.UPLOADING,this.trigger("BeforeUpload",e)&&this.trigger("UploadFile",e));i==a.length&&(this.stop(),this.trigger("UploadComplete",a))}}function u(){var t,n;for(i.reset(),t=0;t<a.length;t++)(n=a[t]).size!==e?(i.size+=n.size,i.loaded+=n.loaded):i.size=e,n.status==E.DONE?i.uploaded++:n.status==E.FAILED?i.failed++:i.queued++;i.size===e?i.percent=a.length>0?Math.ceil(i.uploaded/a.length*100):0:(i.bytesPerSec=Math.ceil(i.loaded/((+new Date-r||1)/1e3)),i.percent=i.size>0?Math.ceil(i.loaded/i.size*100):0)}i=new E.QueueProgress,t=E.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},t),E.extend(this,{state:E.STOPPED,runtime:"",features:{},files:a,settings:t,total:i,id:E.guid(),init:function(){var i,s,o,c=this,p=0;if("function"==typeof t.preinit?t.preinit(c):E.each(t.preinit,(function(e,t){c.bind(t,e)})),t.page_url=t.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(t.url)||(t.url=t.page_url+t.url),t.chunk_size=E.parseSize(t.chunk_size),t.max_file_size=E.parseSize(t.max_file_size),c.bind("FilesAdded",(function(i,n){var r,s,o,d=0,u=t.filters;for(u&&u.length&&(o=[],E.each(u,(function(e){E.each(e.extensions.split(/,/),(function(e){/^\s*\*\s*$/.test(e)?o.push("\\.*"):o.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))}))})),o=new RegExp(o.join("|")+"$","i")),r=0;r<n.length;r++)(s=n[r]).loaded=0,s.percent=0,s.status=E.QUEUED,!o||o.test(s.name)?s.size!==e&&s.size>t.max_file_size?i.trigger("Error",{code:E.FILE_SIZE_ERROR,message:E.translate("File size error."),file:s}):(a.push(s),d++):i.trigger("Error",{code:E.FILE_EXTENSION_ERROR,message:E.translate("File extension error."),file:s});if(!d)return!1;l((function(){c.trigger("QueueChanged"),c.refresh()}),1)})),t.unique_names&&c.bind("UploadFile",(function(e,t){var i=t.name.match(/\.([^.]+)$/),n="tmp";i&&(n=i[1]),t.target_name=t.id+"."+n})),c.bind("UploadProgress",(function(e,t){t.percent=t.size>0?Math.ceil(t.loaded/t.size*100):100,u()})),c.bind("StateChanged",(function(e){if(e.state==E.STARTED)r=+new Date;else if(e.state==E.STOPPED)for(i=e.files.length-1;i>=0;i--)e.files[i].status==E.UPLOADING&&(e.files[i].status=E.QUEUED,u())})),c.bind("QueueChanged",u),c.bind("Error",(function(e,t){t.file&&(t.file.status=E.FAILED,u(),e.state==E.STARTED&&l((function(){d.call(c)}),1))})),c.bind("FileUploaded",(function(e,t){t.status=E.DONE,t.loaded=t.size,e.trigger("UploadProgress",t),l((function(){d.call(c)}),1)})),t.runtimes)for(s=[],o=t.runtimes.split(/\s?,\s?/),i=0;i<o.length;i++)n[o[i]]&&s.push(n[o[i]]);else s=n;!function e(){var t,i,n,r=s[p++];if(r){if(t=r.getFeatures(),i=c.settings.required_features)for(i=i.split(","),n=0;n<i.length;n++)if(!t[i[n]])return void e();r.init(c,(function(i){i&&i.success?(c.features=t,c.runtime=r.name,c.trigger("Init",{runtime:r.name}),c.trigger("PostInit"),c.refresh()):e()}))}else c.trigger("Error",{code:E.INIT_ERROR,message:E.translate("Init error.")})}(),"function"==typeof t.init?t.init(c):E.each(t.init,(function(e,t){c.bind(t,e)}))},refresh:function(){this.trigger("Refresh")},start:function(){a.length&&this.state!=E.STARTED&&(this.state=E.STARTED,this.trigger("StateChanged"),d.call(this))},stop:function(){this.state!=E.STOPPED&&(this.state=E.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},disableBrowse:function(){o=arguments[0]===e||arguments[0],this.trigger("DisableBrowse",o)},getFile:function(e){var t;for(t=a.length-1;t>=0;t--)if(a[t].id===e)return a[t]},removeFile:function(e){var t;for(t=a.length-1;t>=0;t--)if(a[t].id===e.id)return this.splice(t,1)[0]},splice:function(t,i){var n;return n=a.splice(t===e?0:t,i===e?a.length:i),this.trigger("FilesRemoved",n),this.trigger("QueueChanged"),n},trigger:function(e){var t,i,n=s[e.toLowerCase()];if(n)for((i=Array.prototype.slice.call(arguments))[0]=this,t=0;t<n.length;t++)if(!1===n[t].func.apply(n[t].scope,i))return!1;return!0},hasEventListener:function(e){return!!s[e.toLowerCase()]},bind:function(e,t,i){var n;e=e.toLowerCase(),(n=s[e]||[]).push({func:t,scope:i||this}),s[e]=n},unbind:function(t){t=t.toLowerCase();var i,n=s[t],r=arguments[1];if(n){if(r!==e){for(i=n.length-1;i>=0;i--)if(n[i].func===r){n.splice(i,1);break}}else n=[];n.length||delete s[t]}},unbindAll:function(){var e=this;E.each(s,(function(t,i){e.unbind(i)}))},destroy:function(){this.stop(),this.trigger("Destroy"),this.unbindAll()}})},E.File=function(e,t,i){var n=this;n.id=e,n.name=t,n.size=i,n.loaded=0,n.percent=0,n.status=0},E.Runtime=function(){this.getFeatures=function(){},this.init=function(e,t){}},E.QueueProgress=function(){var e=this;e.size=0,e.loaded=0,e.uploaded=0,e.failed=0,e.queued=0,e.percent=0,e.bytesPerSec=0,e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}},E.runtimes={},window.plupload=E}(),function(){if(!window.google||!google.gears){var e=null;if("undefined"!=typeof GearsFactory)e=new GearsFactory;else try{-1!=(e=new ActiveXObject("Gears.Factory")).getBuildInfo().indexOf("ie_mobile")&&e.privateSetGlobalObject(this)}catch(t){void 0!==navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&((e=document.createElement("object")).style.display="none",e.width=0,e.height=0,e.type="application/x-googlegears",document.documentElement.appendChild(e))}e&&(window.google||(window.google={}),google.gears||(google.gears={factory:e}))}}(),r=window,s=document,a=plupload,o={},a.runtimes.Gears=a.addRuntime("gears",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(e,t){var i,n,l=!1;if(!r.google||!google.gears)return t({success:!1});try{i=google.gears.factory.create("beta.desktop")}catch(e){return t({success:!1})}function d(t){var i,n,r,s=[];for(n=0;n<t.length;n++)i=t[n],r=a.guid(),o[r]=i.blob,s.push(new a.File(r,i.name,i.blob.length));e.trigger("FilesAdded",s)}e.bind("PostInit",(function(){var t=e.settings,n=s.getElementById(t.drop_element);n&&(a.addEvent(n,"dragover",(function(e){i.setDropEffect(e,"copy"),e.preventDefault()}),e.id),a.addEvent(n,"drop",(function(e){var t=i.getDragData(e,"application/x-gears-files");t&&d(t.files),e.preventDefault()}),e.id),n=0),a.addEvent(s.getElementById(t.browse_button),"click",(function(e){var n,r,s,a=[];if(e.preventDefault(),!l){e:for(n=0;n<t.filters.length;n++)for(s=t.filters[n].extensions.split(","),r=0;r<s.length;r++){if("*"===s[r]){a=[];break e}a.push("."+s[r])}i.openFiles(d,{singleFile:!t.multi_selection,filter:a})}}),e.id)})),e.bind("CancelUpload",(function(){n.abort&&n.abort()})),e.bind("UploadFile",(function(e,t){var i,r,s,l=0,d=0,u=e.settings.resize;u&&/\.(png|jpg|jpeg)$/i.test(t.name)&&(o[t.id]=function(e,t,i){var n,r;n=google.gears.factory.create("beta.canvas");try{if(n.decode(e),t.width||(t.width=n.width),t.height||(t.height=n.height),(r=Math.min(t.width/n.width,t.height/n.height))<1)n.resize(Math.round(n.width*r),Math.round(n.height*r));else if(!t.quality||"image/jpeg"!==i)return e;return t.quality?n.encode(i,{quality:t.quality/100}):n.encode(i)}catch(e){}return e}(o[t.id],u,/\.png$/i.test(t.name)?"image/png":"image/jpeg")),t.size=o[t.id].length,r=e.settings.chunk_size,s=r>0,i=Math.ceil(t.size/r),s||(r=t.size,i=1),function u(){var c,p,g,f,h,m,v,E,b=e.settings.multipart,y=0,_={name:t.target_name||t.name},w=e.settings.url;t.status!=a.DONE&&t.status!=a.FAILED&&e.state!=a.STOPPED&&(s&&(_.chunk=l,_.chunks=i),c=Math.min(r,t.size-l*r),b||(w=a.buildUrl(e.settings.url,_)),(n=google.gears.factory.create("beta.httprequest")).open("POST",w),b||(n.setRequestHeader("Content-Disposition",'attachment; filename="'+t.name+'"'),n.setRequestHeader("Content-Type","application/octet-stream")),a.each(e.settings.headers,(function(e,t){n.setRequestHeader(t,e)})),n.upload.onprogress=function(i){t.loaded=d+i.loaded-y,e.trigger("UploadProgress",t)},n.onreadystatechange=function(){var r;if(4==n.readyState&&e.state!==a.STOPPED)if(200==n.status){if(r={chunk:l,chunks:i,response:n.responseText,status:n.status},e.trigger("ChunkUploaded",t,r),r.cancelled)return void(t.status=a.FAILED);d+=c,++l>=i?(t.status=a.DONE,e.trigger("FileUploaded",t,{response:n.responseText,status:n.status})):u()}else e.trigger("Error",{code:a.HTTP_ERROR,message:a.translate("HTTP Error."),file:t,chunk:l,chunks:i,status:n.status})},l<i&&(p=o[t.id].slice(l*r,c),m="----pluploadboundary"+a.guid(),v="--",E="\r\n",b&&(n.setRequestHeader("Content-Type","multipart/form-data; boundary="+m),g=google.gears.factory.create("beta.blobbuilder"),a.each(a.extend(_,e.settings.multipart_params),(function(e,t){g.append(v+m+E+'Content-Disposition: form-data; name="'+t+'"'+E+E),g.append(e+E)})),h=a.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",g.append(v+m+E+'Content-Disposition: form-data; name="'+e.settings.file_data_name+'"; filename="'+t.name+'"\r\nContent-Type: '+h+E+E),g.append(p),g.append(E+v+m+v+E),f=g.getAsBlob(),y=f.length-p.length,p=f),n.send(p)))}()})),e.bind("DisableBrowse",(function(e,t){l=t})),e.bind("Destroy",(function(e){var t,i,n={browseButton:e.settings.browse_button,dropElm:e.settings.drop_element};for(t in n)(i=s.getElementById(n[t]))&&a.removeAllEvents(i,e.id)})),t({success:!0})}}),function(e,t,i,n){var r={},s={};function a(e){var t,i,r,s,o=typeof e;if(e===n||null===e)return"null";if("string"===o)return t="\bb\tt\nn\ff\rr\"\"''\\\\",'"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,(function(e,i){var n=t.indexOf(i);return n+1?"\\"+t.charAt(n+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)}))+'"';if("object"==o){if(i=e.length!==n,t="",i){for(r=0;r<e.length;r++)t&&(t+=","),t+=a(e[r]);t="["+t+"]"}else{for(s in e)e.hasOwnProperty(s)&&(t&&(t+=","),t+=a(s)+":"+a(e[s]));t="{"+t+"}"}return t}return""+e}i.silverlight={trigger:function(e,t){var n,s=r[e];s&&((n=i.toArray(arguments).slice(1))[0]="Silverlight:"+t,setTimeout((function(){s.trigger.apply(s,n)}),0))}},i.runtimes.Silverlight=i.addRuntime("silverlight",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(n,o){var l,d,u="",c=n.settings.filters,p=t.body;if(!function(e){var t,i,n,r,s,a=!1,o=0;try{try{new ActiveXObject("AgControl.AgControl").IsVersionSupported(e)&&(a=!0)}catch(d){var l=navigator.plugins["Silverlight Plug-In"];if(l){for("1.0.30226.2"===(t=l.description)&&(t="2.0.30226.2"),i=t.split(".");i.length>3;)i.pop();for(;i.length<4;)i.push(0);for(n=e.split(".");n.length>4;)n.pop();do{r=parseInt(n[o],10),s=parseInt(i[o],10),o++}while(o<n.length&&r===s);r<=s&&!isNaN(r)&&(a=!0)}}}catch(e){a=!1}return a}("2.0.31005.0")||e.opera&&e.opera.buildNumber)o({success:!1});else{for(s[n.id]=!1,r[n.id]=n,(l=t.createElement("div")).id=n.id+"_silverlight_container",i.extend(l.style,{position:"absolute",top:"0px",background:n.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100px",height:"100px",overflow:"hidden",opacity:n.settings.shim_bgcolor||t.documentMode>8?"":.01}),l.className="plupload silverlight",n.settings.container&&(p=t.getElementById(n.settings.container),"static"===i.getStyle(p,"position")&&(p.style.position="relative")),p.appendChild(l),d=0;d<c.length;d++)u+=(""!=u?"|":"")+c[d].title+" | *."+c[d].extensions.replace(/,/g,";*.");l.innerHTML='<object id="'+n.id+'_silverlight" data="data:application/x-silverlight," type="application/x-silverlight-2" style="outline:none;" width="1024" height="1024"><param name="source" value="'+n.settings.silverlight_xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="id='+n.id+",filter="+u+",multiselect="+n.settings.multi_selection+'"/></object>',n.bind("Silverlight:Init",(function(){var e,l={};s[n.id]||(s[n.id]=!0,n.bind("Silverlight:StartSelectFiles",(function(t){e=[]})),n.bind("Silverlight:SelectFile",(function(t,n,r,s){var a;a=i.guid(),l[a]=n,l[n]=a,e.push(new i.File(a,r,s))})),n.bind("Silverlight:SelectSuccessful",(function(){e.length&&n.trigger("FilesAdded",e)})),n.bind("Silverlight:UploadChunkError",(function(e,t,r,s,a){n.trigger("Error",{code:i.IO_ERROR,message:"IO Error.",details:a,file:e.getFile(l[t])})})),n.bind("Silverlight:UploadFileProgress",(function(e,t,n,r){var s=e.getFile(l[t]);s.status!=i.FAILED&&(s.size=r,s.loaded=n,e.trigger("UploadProgress",s))})),n.bind("Refresh",(function(e){var n,r,s;(n=t.getElementById(e.settings.browse_button))&&(r=i.getPos(n,t.getElementById(e.settings.container)),s=i.getSize(n),i.extend(t.getElementById(e.id+"_silverlight_container").style,{top:r.y+"px",left:r.x+"px",width:s.w+"px",height:s.h+"px"}))})),n.bind("Silverlight:UploadChunkSuccessful",(function(e,t,n,r,s){var a,o=e.getFile(l[t]);a={chunk:n,chunks:r,response:s},e.trigger("ChunkUploaded",o,a),o.status!=i.FAILED&&e.state!==i.STOPPED&&g().UploadNextChunk(),n==r-1&&(o.status=i.DONE,e.trigger("FileUploaded",o,{response:s}))})),n.bind("Silverlight:UploadSuccessful",(function(e,t,n){var r=e.getFile(l[t]);r.status=i.DONE,e.trigger("FileUploaded",r,{response:n})})),n.bind("FilesRemoved",(function(e,t){var i;for(i=0;i<t.length;i++)g().RemoveFile(l[t[i].id])})),n.bind("UploadFile",(function(e,t){var n=e.settings,r=n.resize||{};g().UploadFile(l[t.id],e.settings.url,a({name:t.target_name||t.name,mime:i.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:n.chunk_size,image_width:r.width,image_height:r.height,image_quality:r.quality,multipart:!!n.multipart,multipart_params:n.multipart_params||{},file_data_name:n.file_data_name,headers:n.headers}))})),n.bind("CancelUpload",(function(){g().CancelUpload()})),n.bind("Silverlight:MouseEnter",(function(e){var r,s;r=t.getElementById(n.settings.browse_button),s=e.settings.browse_button_hover,r&&s&&i.addClass(r,s)})),n.bind("Silverlight:MouseLeave",(function(e){var r,s;r=t.getElementById(n.settings.browse_button),s=e.settings.browse_button_hover,r&&s&&i.removeClass(r,s)})),n.bind("Silverlight:MouseLeftButtonDown",(function(e){var r,s;r=t.getElementById(n.settings.browse_button),s=e.settings.browse_button_active,r&&s&&(i.addClass(r,s),i.addEvent(t.body,"mouseup",(function(){i.removeClass(r,s)})))})),n.bind("Sliverlight:StartSelectFiles",(function(e){var r,s;r=t.getElementById(n.settings.browse_button),s=e.settings.browse_button_active,r&&s&&i.removeClass(r,s)})),n.bind("DisableBrowse",(function(e,t){g().DisableBrowse(t)})),n.bind("Destroy",(function(e){var n;i.removeAllEvents(t.body,e.id),delete s[e.id],delete r[e.id],(n=t.getElementById(e.id+"_silverlight_container"))&&n.parentNode.removeChild(n)})),o({success:!0}))}))}function g(){return t.getElementById(n.id+"_silverlight").content.Upload}}})}(window,document,plupload),function(e,t,i,n){var r={},s={};i.flash={trigger:function(e,t,i){setTimeout((function(){var n=r[e];n&&n.trigger("Flash:"+t,i)}),0)}},i.runtimes.Flash=i.addRuntime("flash",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,maxWidth:8091,maxHeight:8091,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(e,n){var a,o,l,d=0,u=t.body;(function(){var e;try{e=(e=navigator.plugins["Shockwave Flash"]).description}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(t){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1])})()<10?n({success:!1}):(s[e.id]=!1,r[e.id]=e,t.getElementById(e.settings.browse_button),(a=t.createElement("div")).id=e.id+"_flash_container",i.extend(a.style,{position:"absolute",top:"0px",background:e.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"}),a.className="plupload flash",e.settings.container&&(u=t.getElementById(e.settings.container),"static"===i.getStyle(u,"position")&&(u.style.position="relative")),u.appendChild(a),o='<object id="'+e.id+'_flash" type="application/x-shockwave-flash" data="'+e.settings.flash_swf_url+'" ',i.ua.ie&&(o+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),o+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+e.settings.flash_swf_url+'" /><param name="flashvars" value="id='+escape(e.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',i.ua.ie?(l=t.createElement("div"),a.appendChild(l),l.outerHTML=o,l=null):a.innerHTML=o,function t(){d++>5e3?n({success:!1}):!1===s[e.id]&&setTimeout(t,1)}(),a=null,e.bind("Destroy",(function(e){var n;i.removeAllEvents(t.body,e.id),delete s[e.id],delete r[e.id],(n=t.getElementById(e.id+"_flash_container"))&&n.parentNode.removeChild(n)})),e.bind("Flash:Init",(function(){var r={};try{c().setFileFilters(e.settings.filters,e.settings.multi_selection)}catch(e){return void n({success:!1})}s[e.id]||(s[e.id]=!0,e.bind("UploadFile",(function(t,n){var s=t.settings,a=e.settings.resize||{};c().uploadFile(r[n.id],s.url,{name:n.target_name||n.name,mime:i.mimeTypes[n.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:s.chunk_size,width:a.width,height:a.height,quality:a.quality,multipart:s.multipart,multipart_params:s.multipart_params||{},file_data_name:s.file_data_name,format:/\.(jpg|jpeg)$/i.test(n.name)?"jpg":"png",headers:s.headers,urlstream_upload:s.urlstream_upload})})),e.bind("CancelUpload",(function(){c().cancelUpload()})),e.bind("Flash:UploadProcess",(function(e,t){var n=e.getFile(r[t.id]);n.status!=i.FAILED&&(n.loaded=t.loaded,n.size=t.size,e.trigger("UploadProgress",n))})),e.bind("Flash:UploadChunkComplete",(function(e,t){var n,s=e.getFile(r[t.id]);n={chunk:t.chunk,chunks:t.chunks,response:t.text},e.trigger("ChunkUploaded",s,n),s.status!==i.FAILED&&e.state!==i.STOPPED&&c().uploadNextChunk(),t.chunk==t.chunks-1&&(s.status=i.DONE,e.trigger("FileUploaded",s,{response:t.text}))})),e.bind("Flash:SelectFiles",(function(t,n){var s,a,o,l=[];for(a=0;a<n.length;a++)s=n[a],o=i.guid(),r[o]=s.id,r[s.id]=o,l.push(new i.File(o,s.name,s.size));l.length&&e.trigger("FilesAdded",l)})),e.bind("Flash:SecurityError",(function(t,n){e.trigger("Error",{code:i.SECURITY_ERROR,message:i.translate("Security error."),details:n.message,file:e.getFile(r[n.id])})})),e.bind("Flash:GenericError",(function(t,n){e.trigger("Error",{code:i.GENERIC_ERROR,message:i.translate("Generic error."),details:n.message,file:e.getFile(r[n.id])})})),e.bind("Flash:IOError",(function(t,n){e.trigger("Error",{code:i.IO_ERROR,message:i.translate("IO error."),details:n.message,file:e.getFile(r[n.id])})})),e.bind("Flash:ImageError",(function(t,n){e.trigger("Error",{code:parseInt(n.code,10),message:i.translate("Image error."),file:e.getFile(r[n.id])})})),e.bind("Flash:StageEvent:rollOver",(function(n){var r,s;r=t.getElementById(e.settings.browse_button),s=n.settings.browse_button_hover,r&&s&&i.addClass(r,s)})),e.bind("Flash:StageEvent:rollOut",(function(n){var r,s;r=t.getElementById(e.settings.browse_button),s=n.settings.browse_button_hover,r&&s&&i.removeClass(r,s)})),e.bind("Flash:StageEvent:mouseDown",(function(n){var r,s;r=t.getElementById(e.settings.browse_button),s=n.settings.browse_button_active,r&&s&&(i.addClass(r,s),i.addEvent(t.body,"mouseup",(function(){i.removeClass(r,s)}),n.id))})),e.bind("Flash:StageEvent:mouseUp",(function(n){var r,s;r=t.getElementById(e.settings.browse_button),s=n.settings.browse_button_active,r&&s&&i.removeClass(r,s)})),e.bind("Flash:ExifData",(function(t,i){e.trigger("ExifData",e.getFile(r[i.id]),i.data)})),e.bind("Flash:GpsData",(function(t,i){e.trigger("GpsData",e.getFile(r[i.id]),i.data)})),e.bind("QueueChanged",(function(t){e.refresh()})),e.bind("FilesRemoved",(function(e,t){var i;for(i=0;i<t.length;i++)c().removeFile(r[t[i].id])})),e.bind("StateChanged",(function(t){e.refresh()})),e.bind("Refresh",(function(n){var r,s,a;c().setFileFilters(e.settings.filters,e.settings.multi_selection),(r=t.getElementById(n.settings.browse_button))&&(s=i.getPos(r,t.getElementById(n.settings.container)),a=i.getSize(r),i.extend(t.getElementById(n.id+"_flash_container").style,{top:s.y+"px",left:s.x+"px",width:a.w+"px",height:a.h+"px"}))})),e.bind("DisableBrowse",(function(e,t){c().disableBrowse(t)})),n({success:!0}))})));function c(){return t.getElementById(e.id+"_flash")}}})}(window,document,plupload),(l=plupload).runtimes.BrowserPlus=l.addRuntime("browserplus",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(e,t){var i=window.BrowserPlus,n={},r=e.settings,s=r.resize;function a(t){var i,r,s,a=[];for(i=0;i<t.length;i++)r=t[i],s=l.guid(),n[s]=r,a.push(new l.File(s,r.name,r.size));i&&e.trigger("FilesAdded",a)}i?i.init((function(o){var d=[{service:"Uploader",version:"3"},{service:"DragAndDrop",version:"1"},{service:"FileBrowse",version:"1"},{service:"FileAccess",version:"2"}];s&&d.push({service:"ImageAlter",version:"4"}),o.success?i.require({services:d},(function(o){o.success?function(){var o=!1;e.bind("PostInit",(function(){var t,n=r.drop_element,s=e.id+"_droptarget",d=document.getElementById(n);function u(e,t){i.DragAndDrop.AddDropTarget({id:e},(function(n){i.DragAndDrop.AttachCallbacks({id:e,hover:function(e){!e&&t&&t()},drop:function(e){t&&t(),a(e)}},(function(){}))}))}d&&(document.attachEvent&&/MSIE/gi.test(navigator.userAgent)?((t=document.createElement("div")).setAttribute("id",s),l.extend(t.style,{position:"absolute",top:"-1000px",background:"red",filter:"alpha(opacity=0)",opacity:0}),document.body.appendChild(t),l.addEvent(d,"dragenter",(function(e){var t,i;t=document.getElementById(n),i=l.getPos(t),l.extend(document.getElementById(s).style,{top:i.y+"px",left:i.x+"px",width:t.offsetWidth+"px",height:t.offsetHeight+"px"})})),u(s,(function(){document.getElementById(s).style.top="-1000px"}))):u(n)),l.addEvent(document.getElementById(r.browse_button),"click",(function(e){var t,n,s,d,u=[],c=r.filters;if(e.preventDefault(),!o){e:for(t=0;t<c.length;t++)for(s=c[t].extensions.split(","),n=0;n<s.length;n++){if("*"===s[n]){u=[];break e}(d=l.mimeTypes[s[n]])&&-1===l.inArray(d,u)&&u.push(l.mimeTypes[s[n]])}i.FileBrowse.OpenBrowseDialog({mimeTypes:u},(function(e){e.success&&a(e.value)}))}})),d=t=null})),e.bind("CancelUpload",(function(){i.Uploader.cancel({},(function(){}))})),e.bind("DisableBrowse",(function(e,t){o=t})),e.bind("UploadFile",(function(e,t){var r,a=n[t.id],o={},d=e.settings.chunk_size,u=[];function c(n,s){var a;t.status!=l.FAILED&&(o.name=t.target_name||t.name,d&&(o.chunk=""+n,o.chunks=""+s),a=u.shift(),i.Uploader.upload({url:e.settings.url,files:{file:a},cookies:document.cookies,postvars:l.extend(o,e.settings.multipart_params),progressCallback:function(i){var s,o=0;for(r[n]=parseInt(i.filePercent*a.size/100,10),s=0;s<r.length;s++)o+=r[s];t.loaded=o,e.trigger("UploadProgress",t)}},(function(i){var r;i.success?(r=i.value.statusCode,d&&e.trigger("ChunkUploaded",t,{chunk:n,chunks:s,response:i.value.body,status:r}),u.length>0?c(++n,s):(t.status=l.DONE,e.trigger("FileUploaded",t,{response:i.value.body,status:r}),r>=400&&e.trigger("Error",{code:l.HTTP_ERROR,message:l.translate("HTTP Error."),file:t,status:r}))):e.trigger("Error",{code:l.GENERIC_ERROR,message:l.translate("Generic Error."),file:t,details:i.error})})))}function p(e){t.size=e.size,d?i.FileAccess.chunk({file:e,chunkSize:d},(function(e){if(e.success){var t=e.value,i=t.length;r=Array(i);for(var n=0;n<i;n++)r[n]=0,u.push(t[n]);c(0,i)}})):(r=Array(1),u.push(e),c(0,1))}s&&/\.(png|jpg|jpeg)$/i.test(t.name)?BrowserPlus.ImageAlter.transform({file:a,quality:s.quality||90,actions:[{scale:{maxwidth:s.width,maxheight:s.height}}]},(function(e){e.success&&p(e.value.file)})):p(a)})),t({success:!0})}():t()})):t()})):t()}}),function(e,t,n,r){var s,a={};function o(e,i,n){var r=e.naturalWidth,s=e.naturalHeight,a=n.width,o=n.height,l=i.getContext("2d");l.save();var d=function(e){var i=e.naturalWidth;if(i*e.naturalHeight>1048576){var n=t.createElement("canvas");n.width=n.height=1;var r=n.getContext("2d");return r.drawImage(e,1-i,0),0===r.getImageData(0,0,1,1).data[3]}return!1}(e);d&&(r/=2,s/=2);var u=1024,c=t.createElement("canvas");c.width=c.height=u;for(var p=c.getContext("2d"),g=function(e,i,n){var r=t.createElement("canvas");r.width=1,r.height=n;var s=r.getContext("2d");s.drawImage(e,0,0);for(var a=s.getImageData(0,0,1,n).data,o=0,l=n,d=n;d>o;)0===a[4*(d-1)+3]?l=d:o=d,d=l+o>>1;var u=d/n;return 0===u?1:u}(e,0,s),f=0;f<s;){for(var h=f+u>s?s-f:u,m=0;m<r;){var v=m+u>r?r-m:u;p.clearRect(0,0,u,u),p.drawImage(e,-m,-f);var E=m*a/r|0,b=Math.ceil(v*a/r),y=f*o/s/g|0,_=Math.ceil(h*o/s/g);l.drawImage(c,0,0,v,h,E,y,b,_),m+=u}f+=u}l.restore(),c=p=null}function l(t,i){var n;if(!("FileReader"in e))return i(t.getAsBinary());(n=new FileReader).readAsBinaryString(t),n.onload=function(){i(n.result)}}function d(i,n,r,s){var l,d,u,g=this;!function(t,i){var n;if(!("FileReader"in e))return i(t.getAsDataURL());(n=new FileReader).readAsDataURL(t),n.onload=function(){i(n.result)}}(a[i.id],(function(e){(l=t.createElement("canvas")).style.display="none",t.body.appendChild(l),(d=new Image).onerror=d.onabort=function(){s({success:!1})},d.onload=function(){var t,a,f,h;if(n.width||(n.width=d.width),n.height||(n.height=d.height),(u=Math.min(n.width/d.width,n.height/d.height))<1)t=Math.round(d.width*u),a=Math.round(d.height*u);else{if(!n.quality||"image/jpeg"!==r)return void s({success:!1});t=d.width,a=d.height}if(l.width=t,l.height=a,o(d,l,{width:t,height:a}),"image/jpeg"===r&&(f=new c(atob(e.substring(e.indexOf("base64,")+7)))).headers&&f.headers.length&&(h=new p).init(f.get("exif")[0])&&(h.setExif("PixelXDimension",t),h.setExif("PixelYDimension",a),f.set("exif",h.getBinary()),g.hasEventListener("ExifData")&&g.trigger("ExifData",i,h.EXIF()),g.hasEventListener("GpsData")&&g.trigger("GpsData",i,h.GPS())),n.quality&&"image/jpeg"===r)try{e=l.toDataURL(r,n.quality/100)}catch(t){e=l.toDataURL(r)}else e=l.toDataURL(r);e=e.substring(e.indexOf("base64,")+7),e=atob(e),f&&f.headers&&f.headers.length&&(e=f.restore(e),f.purge()),l.parentNode.removeChild(l),s({success:!0,data:e})},d.src=e}))}function u(){var e,t=!1;function i(i,n){var r,s=t?0:-8*(n-1),a=0;for(r=0;r<n;r++)a|=e.charCodeAt(i+r)<<Math.abs(s+8*r);return a}function n(t,i,n){n=3===arguments.length?n:e.length-i-1;e=e.substr(0,i)+t+e.substr(n+i)}return{II:function(e){if(e===r)return t;t=e},init:function(i){t=!1,e=i},SEGMENT:function(t,i,r){switch(arguments.length){case 1:return e.substr(t,e.length-t-1);case 2:return e.substr(t,i);case 3:n(r,t,i);break;default:return e}},BYTE:function(e){return i(e,1)},SHORT:function(e){return i(e,2)},LONG:function(e,s){if(s===r)return i(e,4);!function(e,i,r){var s,a="",o=t?0:-8*(r-1);for(s=0;s<r;s++)a+=String.fromCharCode(i>>Math.abs(o+8*s)&255);n(a,e,r)}(e,s,4)},SLONG:function(e){var t=i(e,4);return t>2147483647?t-4294967296:t},STRING:function(e,t){var n="";for(t+=e;e<t;e++)n+=String.fromCharCode(i(e,1));return n}}}function c(e){var t,i,n,s={65505:{app:"EXIF",name:"APP1",signature:"Exif\0"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\0"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\0"}},a=[],o=r,l=0;if((t=new u).init(e),65496===t.SHORT(0)){for(i=2,n=Math.min(1048576,e.length);i<=n;)if((o=t.SHORT(i))>=65488&&o<=65495)i+=2;else{if(65498===o||65497===o)break;l=t.SHORT(i+2)+2,s[o]&&t.STRING(i+4,s[o].signature.length)===s[o].signature&&a.push({hex:o,app:s[o].app.toUpperCase(),name:s[o].name.toUpperCase(),start:i,length:l,segment:t.SEGMENT(i,l)}),i+=l}return t.init(null),{headers:a,restore:function(e){t.init(e);var n=new c(e);if(!n.headers)return!1;for(var r=n.headers.length;r>0;r--){var s=n.headers[r-1];t.SEGMENT(s.start,s.length,"")}n.purge(),i=65504==t.SHORT(2)?4+t.SHORT(4):2;r=0;for(var o=a.length;r<o;r++)t.SEGMENT(i,0,a[r].segment),i+=a[r].length;return t.SEGMENT()},get:function(e){for(var t=[],i=0,n=a.length;i<n;i++)a[i].app===e.toUpperCase()&&t.push(a[i].segment);return t},set:function(e,t){var i=[];"string"==typeof t?i.push(t):i=t;for(var n=ii=0,r=a.length;n<r&&(a[n].app===e.toUpperCase()&&(a[n].segment=i[ii],a[n].length=i[ii].length,ii++),!(ii>=i.length));n++);},purge:function(){a=[],t.init(null)}}}}function p(){var e,t,s,a={};function o(t,i){var n,o,l,d,u,c,p,g=e.SHORT(t),f=[],h={};for(n=0;n<g;n++)if(c=t+12*n+2,(l=i[e.SHORT(c)])!==r){switch(d=e.SHORT(c+=2),u=e.LONG(c+=2),c+=4,f=[],d){case 1:case 7:for(u>4&&(c=e.LONG(c)+a.tiffHeader),o=0;o<u;o++)f[o]=e.BYTE(c+o);break;case 2:u>4&&(c=e.LONG(c)+a.tiffHeader),h[l]=e.STRING(c,u-1);continue;case 3:for(u>2&&(c=e.LONG(c)+a.tiffHeader),o=0;o<u;o++)f[o]=e.SHORT(c+2*o);break;case 4:for(u>1&&(c=e.LONG(c)+a.tiffHeader),o=0;o<u;o++)f[o]=e.LONG(c+4*o);break;case 5:for(c=e.LONG(c)+a.tiffHeader,o=0;o<u;o++)f[o]=e.LONG(c+4*o)/e.LONG(c+4*o+4);break;case 9:for(c=e.LONG(c)+a.tiffHeader,o=0;o<u;o++)f[o]=e.SLONG(c+4*o);break;case 10:for(c=e.LONG(c)+a.tiffHeader,o=0;o<u;o++)f[o]=e.SLONG(c+4*o)/e.SLONG(c+4*o+4);break;default:continue}p=1==u?f[0]:f,s.hasOwnProperty(l)&&"object"!=typeof p?h[l]=s[l][p]:h[l]=p}return h}return e=new u,t={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},s={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(i){return a={tiffHeader:10},!(i===r||!i.length)&&(e.init(i),65505===e.SHORT(0)&&"EXIF\0"===e.STRING(4,5).toUpperCase()&&function(){var i,n=a.tiffHeader;return e.II(18761==e.SHORT(n)),42===e.SHORT(n+=2)&&(a.IFD0=a.tiffHeader+e.LONG(n+=2),i=o(a.IFD0,t.tiff),a.exifIFD="ExifIFDPointer"in i?a.tiffHeader+i.ExifIFDPointer:r,a.gpsIFD="GPSInfoIFDPointer"in i?a.tiffHeader+i.GPSInfoIFDPointer:r,!0)}())},EXIF:function(){var e;if((e=o(a.exifIFD,t.exif)).ExifVersion&&"array"===n.typeOf(e.ExifVersion)){for(var i=0,r="";i<e.ExifVersion.length;i++)r+=String.fromCharCode(e.ExifVersion[i]);e.ExifVersion=r}return e},GPS:function(){var e;return(e=o(a.gpsIFD,t.gps)).GPSVersionID&&(e.GPSVersionID=e.GPSVersionID.join(".")),e},setExif:function(n,r){return("PixelXDimension"===n||"PixelYDimension"===n)&&function(n,r,s){var o,l,d,u=0;if("string"==typeof r){var c=t[n.toLowerCase()];for(hex in c)if(c[hex]===r){r=hex;break}}for(o=a[n.toLowerCase()+"IFD"],l=e.SHORT(o),i=0;i<l;i++)if(d=o+12*i+2,e.SHORT(d)==r){u=d+8;break}return!!u&&(e.LONG(u,s),!0)}("exif",n,r)},getBinary:function(){return e.SEGMENT()}}}n.runtimes.Html5=n.addRuntime("html5",{getFeatures:function(){var i,r,a,o,l,d,u;return r=a=l=d=!1,e.XMLHttpRequest&&(a=!!(i=new XMLHttpRequest).upload,r=!(!i.sendAsBinary&&!i.upload)),r&&(o=!!(i.sendAsBinary||e.Uint8Array&&e.ArrayBuffer),l=!(!File||!File.prototype.getAsDataURL&&!e.FileReader||!o),d=!(!File||!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))),s=n.ua.safari&&n.ua.windows,{html5:r,dragdrop:(u=t.createElement("div"),"draggable"in u||"ondragstart"in u&&"ondrop"in u),jpgresize:l,pngresize:l,multipart:l||!!e.FileReader||!!e.FormData,canSendBinary:o,cantSendBlobInFormData:!(!(n.ua.gecko&&e.FormData&&e.FileReader)||FileReader.prototype.readAsArrayBuffer)||n.ua.android,progress:a,chunks:d,multi_selection:!(n.ua.safari&&n.ua.windows),triggerDialog:n.ua.gecko&&e.FormData||n.ua.webkit}},init:function(i,r){var o,u;function c(e){var t,r,s,o=[],l={};for(r=0;r<e.length;r++)l[(t=e[r]).name]&&n.ua.safari&&n.ua.windows||(l[t.name]=!0,s=n.guid(),a[s]=t,o.push(new n.File(s,t.fileName||t.name,t.fileSize||t.size)));o.length&&i.trigger("FilesAdded",o)}(o=this.getFeatures()).html5?(i.bind("Init",(function(e){var r,s,a,o,l,d,u,p=[],g=e.settings.filters,f=t.body;(r=t.createElement("div")).id=e.id+"_html5_container",n.extend(r.style,{position:"absolute",background:i.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:i.settings.shim_bgcolor?"":0}),r.className="plupload html5",i.settings.container&&(f=t.getElementById(i.settings.container),"static"===n.getStyle(f,"position")&&(f.style.position="relative")),f.appendChild(r);e:for(a=0;a<g.length;a++)for(l=g[a].extensions.split(/,/),o=0;o<l.length;o++){if("*"===l[o]){p=[];break e}(d=n.mimeTypes[l[o]])&&-1===n.inArray(d,p)&&p.push(d)}if(r.innerHTML='<input id="'+i.id+'_html5"  style="font-size:99px" type="file" accept="'+p.join(",")+'" '+(i.settings.multi_selection&&i.features.multi_selection?'multiple="multiple"':"")+" />",r.scrollTop=100,u=t.getElementById(i.id+"_html5"),e.features.triggerDialog?n.extend(u.style,{position:"absolute",width:"100%",height:"100%"}):n.extend(u.style,{cssFloat:"right",styleFloat:"right"}),u.onchange=function e(){if(c(this.files),n.ua.ie){var t=this.cloneNode(!0);this.parentNode.replaceChild(t,this),t.onchange=e,t=null}else this.value=""},s=t.getElementById(e.settings.browse_button)){var h=e.settings.browse_button_hover,m=e.settings.browse_button_active,v=e.features.triggerDialog?s:r;h&&(n.addEvent(v,"mouseover",(function(){n.addClass(s,h)}),e.id),n.addEvent(v,"mouseout",(function(){n.removeClass(s,h)}),e.id)),m&&(n.addEvent(v,"mousedown",(function(){n.addClass(s,m)}),e.id),n.addEvent(t.body,"mouseup",(function(){n.removeClass(s,m)}),e.id)),e.features.triggerDialog&&n.addEvent(s,"click",(function(i){var n=t.getElementById(e.id+"_html5");n&&!n.disabled&&n.click(),i.preventDefault()}),e.id)}})),i.bind("PostInit",(function(){var e=t.getElementById(i.settings.drop_element);if(e){if(s)return void n.addEvent(e,"dragenter",(function(r){var s,a;(s=t.getElementById(i.id+"_drop"))||((s=t.createElement("input")).setAttribute("type","file"),s.setAttribute("id",i.id+"_drop"),s.setAttribute("multiple","multiple"),n.addEvent(s,"change",(function(){c(this.files),n.removeEvent(s,"change",i.id),s.parentNode.removeChild(s)}),i.id),n.addEvent(s,"dragover",(function(e){e.stopPropagation()}),i.id),e.appendChild(s)),n.getPos(e,t.getElementById(i.settings.container)),a=n.getSize(e),"static"===n.getStyle(e,"position")&&n.extend(e.style,{position:"relative"}),n.extend(s.style,{position:"absolute",display:"block",top:0,left:0,width:a.w+"px",height:a.h+"px",opacity:0})}),i.id);n.addEvent(e,"dragover",(function(e){e.preventDefault()}),i.id),n.addEvent(e,"drop",(function(e){var t=e.dataTransfer;t&&t.files&&c(t.files),e.preventDefault()}),i.id)}})),i.bind("Refresh",(function(e){var r,s,a,o,l;(r=t.getElementById(i.settings.browse_button))&&(s=n.getPos(r,t.getElementById(e.settings.container)),a=n.getSize(r),o=t.getElementById(i.id+"_html5_container"),n.extend(o.style,{top:s.y+"px",left:s.x+"px",width:a.w+"px",height:a.h+"px"}),i.features.triggerDialog&&("static"===n.getStyle(r,"position")&&n.extend(r.style,{position:"relative"}),l=parseInt(n.getStyle(r,"zIndex"),10),isNaN(l)&&(l=0),n.extend(r.style,{zIndex:l}),n.extend(o.style,{zIndex:l-1})))})),i.bind("DisableBrowse",(function(e,i){var n=t.getElementById(e.id+"_html5");n&&(n.disabled=i)})),i.bind("CancelUpload",(function(){u&&u.abort&&u.abort()})),i.bind("UploadFile",(function(t,i){var r,s=t.settings;function c(r){var a=0,l=0;!function d(){var c,p,g,f,h,m,v=1,E=t.settings.url;function b(e){if(u.sendAsBinary)u.sendAsBinary(e);else if(t.features.canSendBinary){for(var i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=255&e.charCodeAt(n);u.send(i.buffer)}}function y(r){var s,m=0,y="----pluploadboundary"+n.guid(),_="--",w="\r\n",S="";if((u=new XMLHttpRequest).upload&&(u.upload.onprogress=function(e){i.loaded=Math.min(i.size,l+e.loaded-m),t.trigger("UploadProgress",i)}),u.onreadystatechange=function(){var e,o;if(4==u.readyState&&t.state!==n.STOPPED){try{e=u.status}catch(t){e=0}if(e>=400)t.trigger("Error",{code:n.HTTP_ERROR,message:n.translate("HTTP Error."),file:i,status:e,response:u.responseText});else{if(v){if(o={chunk:a,chunks:v,response:u.responseText,status:e},t.trigger("ChunkUploaded",i,o),l+=f,o.cancelled)return void(i.status=n.FAILED);i.loaded=Math.min(i.size,(a+1)*g)}else i.loaded=i.size;t.trigger("UploadProgress",i),r=c=s=S=null,!v||++a>=v?(i.status=n.DONE,t.trigger("FileUploaded",i,{response:u.responseText,status:e})):d()}}},t.settings.multipart&&o.multipart){if(p.name=i.target_name||i.name,u.open("post",E,!0),n.each(t.settings.headers,(function(e,t){u.setRequestHeader(t,e)})),"string"!=typeof r&&e.FormData)return s=new FormData,n.each(n.extend(p,t.settings.multipart_params),(function(e,t){s.append(t,e)})),s.append(t.settings.file_data_name,r),void u.send(s);if("string"==typeof r)return u.setRequestHeader("Content-Type","multipart/form-data; boundary="+y),n.each(n.extend(p,t.settings.multipart_params),(function(e,t){S+=_+y+w+'Content-Disposition: form-data; name="'+t+'"'+w+w,S+=unescape(encodeURIComponent(e))+w})),h=n.mimeTypes[i.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",S+=_+y+w+'Content-Disposition: form-data; name="'+t.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(i.name))+'"'+"\r\nContent-Type: "+h+w+w+r+w+_+y+_+w,m=S.length-r.length,void b(r=S)}E=n.buildUrl(t.settings.url,n.extend(p,t.settings.multipart_params)),u.open("post",E,!0),u.setRequestHeader("Content-Type","application/octet-stream"),n.each(t.settings.headers,(function(e,t){u.setRequestHeader(t,e)})),"string"==typeof r?b(r):u.send(r)}i.status!=n.DONE&&i.status!=n.FAILED&&t.state!=n.STOPPED&&(p={name:i.target_name||i.name},s.chunk_size&&i.size>s.chunk_size&&(o.chunks||"string"==typeof r)?(g=s.chunk_size,v=Math.ceil(i.size/g),f=Math.min(g,i.size-a*g),c="string"==typeof r?r.substring(a*g,a*g+f):function(e,t,i){var n;if(!File.prototype.slice)return(n=File.prototype.webkitSlice||File.prototype.mozSlice)?n.call(e,t,i):null;try{return e.slice(),e.slice(t,i)}catch(n){return e.slice(t,i-t)}}(r,a*g,a*g+f)):(f=i.size,c=r),s.chunk_size&&o.chunks&&(p.chunk=a,p.chunks=v),t.settings.multipart&&o.multipart&&"string"!=typeof c&&e.FileReader&&o.cantSendBlobInFormData&&o.chunks&&t.settings.chunk_size?((m=new FileReader).onload=function(){y(m.result),m=null},m.readAsBinaryString(c)):y(c))}()}r=a[i.id],o.jpgresize&&t.settings.resize&&/\.(png|jpg|jpeg)$/i.test(i.name)?d.call(t,i,t.settings.resize,/\.png$/i.test(i.name)?"image/png":"image/jpeg",(function(e){e.success?(i.size=e.data.length,c(e.data)):o.chunks?c(r):l(r,c)})):!o.chunks&&o.jpgresize?l(r,c):c(r)})),i.bind("Destroy",(function(e){var i,r,s=t.body,a={inputContainer:e.id+"_html5_container",inputFile:e.id+"_html5",browseButton:e.settings.browse_button,dropElm:e.settings.drop_element};for(i in a)(r=t.getElementById(a[i]))&&n.removeAllEvents(r,e.id);n.removeAllEvents(t.body,e.id),e.settings.container&&(s=t.getElementById(e.settings.container)),s.removeChild(t.getElementById(a.inputContainer))})),r({success:!0})):r({success:!1})}})}(window,document,plupload),function(e,t,i,n){function r(e){return t.getElementById(e)}i.runtimes.Html4=i.addRuntime("html4",{getFeatures:function(){return{multipart:!0,triggerDialog:i.ua.gecko&&e.FormData||i.ua.webkit}},init:function(n,s){n.bind("Init",(function(s){var a,o,l,d,u,c,p,g=t.body,f=[],h=/MSIE/.test(navigator.userAgent),m=[],v=s.settings.filters;e:for(d=0;d<v.length;d++)for(u=v[d].extensions.split(/,/),p=0;p<u.length;p++){if("*"===u[p]){m=[];break e}(c=i.mimeTypes[u[p]])&&-1===i.inArray(c,m)&&m.push(c)}m=m.join(","),s.settings.container&&(g=r(s.settings.container),"static"===i.getStyle(g,"position")&&(g.style.position="relative")),s.bind("UploadFile",(function(e,n){var s;n.status!=i.DONE&&n.status!=i.FAILED&&e.state!=i.STOPPED&&(s=r("form_"+n.id),r("input_"+n.id).setAttribute("name",e.settings.file_data_name),s.setAttribute("action",e.settings.url),i.each(i.extend({name:n.target_name||n.name},e.settings.multipart_params),(function(e,n){var r=t.createElement("input");i.extend(r,{type:"hidden",name:n,value:e}),s.insertBefore(r,s.firstChild)})),o=n,r("form_"+l).style.top="-1048575px",s.submit())})),s.bind("FileUploaded",(function(e){e.refresh()})),s.bind("StateChanged",(function(n){n.state==i.STARTED?function(){var n=t.createElement("div");n.innerHTML='<iframe id="'+s.id+'_iframe" name="'+s.id+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',a=n.firstChild,g.appendChild(a),i.addEvent(a,"load",(function(t){var n,r,a=t.target;if(o){try{n=a.contentWindow.document||a.contentDocument||e.frames[a.id].document}catch(e){return void s.trigger("Error",{code:i.SECURITY_ERROR,message:i.translate("Security error."),file:o})}(r=n.documentElement.innerText||n.documentElement.textContent)&&(o.status=i.DONE,o.loaded=1025,o.percent=100,s.trigger("UploadProgress",o),s.trigger("FileUploaded",o,{response:r}))}}),s.id)}():n.state==i.STOPPED&&e.setTimeout((function(){i.removeEvent(a,"load",n.id),a.parentNode&&a.parentNode.removeChild(a)}),0),i.each(n.files,(function(e,t){if(e.status===i.DONE||e.status===i.FAILED){var n=r("form_"+e.id);n&&n.parentNode.removeChild(n)}}))})),s.bind("Refresh",(function(e){var n,s,a,o,d,u,c,p;(n=r(e.settings.browse_button))&&(d=i.getPos(n,r(e.settings.container)),u=i.getSize(n),c=r("form_"+l),r("input_"+l),i.extend(c.style,{top:d.y+"px",left:d.x+"px",width:u.w+"px",height:u.h+"px"}),e.features.triggerDialog&&("static"===i.getStyle(n,"position")&&i.extend(n.style,{position:"relative"}),p=parseInt(n.style.zIndex,10),isNaN(p)&&(p=0),i.extend(n.style,{zIndex:p}),i.extend(c.style,{zIndex:p-1})),a=e.settings.browse_button_hover,o=e.settings.browse_button_active,s=e.features.triggerDialog?n:c,a&&(i.addEvent(s,"mouseover",(function(){i.addClass(n,a)}),e.id),i.addEvent(s,"mouseout",(function(){i.removeClass(n,a)}),e.id)),o&&(i.addEvent(s,"mousedown",(function(){i.addClass(n,o)}),e.id),i.addEvent(t.body,"mouseup",(function(){i.removeClass(n,o)}),e.id)))})),n.bind("FilesRemoved",(function(e,t){var i,n;for(i=0;i<t.length;i++)(n=r("form_"+t[i].id))&&n.parentNode.removeChild(n)})),n.bind("DisableBrowse",(function(e,i){var n=t.getElementById("input_"+l);n&&(n.disabled=i)})),n.bind("Destroy",(function(e){var n,s,a,o={inputContainer:"form_"+l,inputFile:"input_"+l,browseButton:e.settings.browse_button};for(n in o)(s=r(o[n]))&&i.removeAllEvents(s,e.id);i.removeAllEvents(t.body,e.id),i.each(f,(function(e,t){(a=r("form_"+e))&&a.parentNode.removeChild(a)}))})),function e(){var a,o,d,u;l=i.guid(),f.push(l),(a=t.createElement("form")).setAttribute("id","form_"+l),a.setAttribute("method","post"),a.setAttribute("enctype","multipart/form-data"),a.setAttribute("encoding","multipart/form-data"),a.setAttribute("target",s.id+"_iframe"),a.style.position="absolute",(o=t.createElement("input")).setAttribute("id","input_"+l),o.setAttribute("type","file"),o.setAttribute("accept",m),o.setAttribute("size",1),u=r(s.settings.browse_button),s.features.triggerDialog&&u&&i.addEvent(r(s.settings.browse_button),"click",(function(e){o.disabled||o.click(),e.preventDefault()}),s.id),i.extend(o.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"}),i.extend(a.style,{overflow:"hidden"}),(d=s.settings.shim_bgcolor)&&(a.style.background=d),h&&i.extend(o.style,{filter:"alpha(opacity=0)"}),i.addEvent(o,"change",(function(t){var d,c=t.target,p=[];c.value&&(r("form_"+l).style.top="-1048575px",d=(d=c.value.replace(/\\/g,"/")).substring(d.length,d.lastIndexOf("/")+1),p.push(new i.File(l,d)),s.features.triggerDialog?i.removeEvent(u,"click",s.id):i.removeAllEvents(a,s.id),i.removeEvent(o,"change",s.id),e(),p.length&&n.trigger("FilesAdded",p))}),s.id),a.appendChild(o),g.appendChild(a),s.refresh()}()})),s({success:!0})}})}(window,document,plupload),d.prototype.setTimer=function(e){this.fileProgressElement.FP_TIMER=e},d.prototype.getTimer=function(e){return this.fileProgressElement.FP_TIMER||null},d.prototype.reset=function(){this.fileProgressElement.className="progressContainer",this.fileProgressElement.childNodes[2].innerHTML="&nbsp;",this.fileProgressElement.childNodes[2].className="progressBarStatus",this.fileProgressElement.childNodes[3].className="progressBarInProgress",this.fileProgressElement.childNodes[3].style.width="0%"},d.prototype.setProgress=function(e){this.fileProgressElement.className="progressContainer green",this.fileProgressElement.childNodes[3].className="progressBarInProgress",this.fileProgressElement.childNodes[3].style.width=e+"%"},d.prototype.setComplete=function(){this.fileProgressElement.className="progressContainer blue",this.fileProgressElement.childNodes[3].className="progressBarComplete",this.fileProgressElement.childNodes[3].style.width=""},d.prototype.setError=function(){this.fileProgressElement.className="progressContainer red",this.fileProgressElement.childNodes[3].className="progressBarError",this.fileProgressElement.childNodes[3].style.width=""},d.prototype.setCancelled=function(){this.fileProgressElement.className="progressContainer",this.fileProgressElement.childNodes[3].className="progressBarError",this.fileProgressElement.childNodes[3].style.width=""},d.prototype.setStatus=function(e){this.fileProgressElement.childNodes[2].innerHTML=e},d.prototype.toggleCancel=function(e,t,i){if(this.fileProgressElement.childNodes[0].style.visibility=e?"visible":"hidden",t){var n=this.fileProgressElement,r=this.fileProgressWrapper;this.fileProgressElement.childNodes[0].onclick=function(){return t.removeFile(i),t.custom.files_upload-=1,t.custom.upload_successful=!t.files.length,t.custom.disableButton(!++t.custom.files_count),n.className="progressContainer red",r.parentNode.removeChild(r),t.custom.files_upload<1&&document.getElementById(t.custom.progress_target).classList.add("is-removed"),!1}}},d.prototype.appear=function(){if(null!==this.getTimer()&&(clearTimeout(this.getTimer()),this.setTimer(null)),this.fileProgressWrapper.filters)try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=100}catch(e){this.fileProgressWrapper.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=100)"}else this.fileProgressWrapper.style.opacity=1;this.fileProgressWrapper.style.height="",this.height=this.fileProgressWrapper.offsetHeight,this.opacity=100,this.fileProgressWrapper.style.display=""},d.prototype.disappear=function(){if(this.opacity>0)if(this.opacity-=15,this.opacity<0&&(this.opacity=0),this.fileProgressWrapper.filters)try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=this.opacity}catch(e){this.fileProgressWrapper.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+this.opacity+")"}else this.fileProgressWrapper.style.opacity=this.opacity/100;if(this.height>0&&(this.height-=4,this.height<0&&(this.height=0),this.fileProgressWrapper.style.height=this.height+"px"),this.height>0||this.opacity>0){var e=this;this.setTimer(setTimeout((function(){e.disappear()}),30))}else this.fileProgressWrapper.style.display="none",this.setTimer(null)};const u=function(e,t,i,n,r,s,a,o,l,u,c,p,g,f,h,m){var v,E,b,y,_,w=function(){setTimeout((function(){plupload.instances||(plupload.instances=[]),document.getElementById(t).innerHTML="",v=document.getElementById(i),E=v.id,(b=function(){let e=!1,i="";if(L(c)){const{upload_url:t,upload_token:n}=JSON.parse(c);_=t,n.length&&(e=!0,i=n)}else _=c;const n=U(e,i);return new plupload.Uploader({file_data_name:e?"files":p,runtimes:"html5,flash,silverlight,html4",browse_button:E,url:_,filters:[],flash_swf_url:"/shared/s3/plupload/plupload.flash.swf",silverlight_xap_url:"/shared/s3/plupload/plupload.silverlight.xap",max_retries:3,headers:n,init:{FilesAdded:function(e,i){plupload.each(i,(function(i){N.call(e,i,t)}))},UploadProgress:function(e,t){O.call(this,t,t.percent)},Error:function(e,t){!function(e,t,i){try{if(t===SWFUpload.UPLOAD_ERROR.FILE_CANCELLED)return;switch(t){case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:return alert("There was a configuration error.  You will not be able to upload a resume at this time."),void this.debug("Error Code: No backend file, File name: "+e.name+", Message: "+i);case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:return alert("Upload Limit Exceeded."),void this.debug("Error Code: Upload Limit Exceeded, File name: "+e.name+", File size: "+e.size+", Message: "+i)}this.custom.error=!0;var n=new d(e,b.custom.progress_target);switch(n.setError(),n.toggleCancel(!0,this),t){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:n.setStatus(S("JS_HTTP_ERROR"));break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:n.setStatus(S("JS_UPLOAD_ERROR"));break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:n.setStatus(S("JS_SERVER_IO_ERROR"));break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:n.setStatus(S("JS_SECURITY_ERROR"));break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:n.setStatus(S("JS_UPLOAD_CANCELED"));break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:n.setStatus(S("JS_UPLOAD_STOPPED"))}}catch(e){}}(t.file,t.code,t.message)},FileUploaded:function(e,t,i){A.call(e,t,i.response)},UploadComplete:function(e,t){T.call(e,t,i)}}})}()).bind("PostInit",(function(){F(v),"object"!=typeof y?alert("No form!"):(b.custom.formSubmitEvents=function(t){if(!t||!e)return!1;t=e(t).get(0);var i=!1,n=[];if((e._data&&"function"==typeof e._data&&e._data(t,"events")&&e._data(t,"events").submit||e(t).data("events")&&e._data(t,"events").submit)&&(i=e._data(t,"events").submit),i){for(var r=0;r<i.length;r++)n.push(i[r].handler);return n}return!1}(y),b.custom.formSubmitEvents&&D(y),y.onsubmit=R)})),b.custom={files_count:u,my_index:o,files_upload:0,required:l,progress_target:t,upload_successful:!0,files:[],formSubmitEvents:!1,hiddenUploadInput:document.getElementById(n),dictionary_id:r,tag_id:s,form_id:a,disableButton:function(e){b.disableBrowse(e),document.getElementById(E).disabled=e}},b.init(),F(v),plupload.instances[y.getAttribute("data-s3-upload")]||(plupload.instances[y.getAttribute("data-s3-upload")]=[]),plupload.instances[y.getAttribute("data-s3-upload")].push(b)}),100)};function S(e){return window._s3Lang&&window._s3Lang[e]?window._s3Lang[e]:e.replace("JS_","").replace("_"," ").toLowerCase()}function x(e){var t=[],i="[object Array]"===Object.prototype.toString.apply(e);for(var n in e){var r=e[n];if("object"==typeof r)i?t.push(x(r)):t[n]=x(r);else{var s="";i||(s='"'+n+'":'),s+="number"==typeof r?r:!1===r?"false":!0===r?"true":'"'+r+'"',t.push(s)}}var a=t.join(",");return i?"["+a+"]":"{"+a+"}"}function F(e){if("object"!=typeof y){var t=e.parentNode;"form"===t.nodeName.toLowerCase()?(y=t).getAttribute("data-s3-upload")||y.setAttribute("data-s3-upload",o):F(e.parentNode)}}function R(t){(t=t||window.event).stopPropagation&&t.stopPropagation(),t.cancelBubble=!0;var i,n=!1,r=!0,s=!1,a=[];for(i in plupload.instances[y.getAttribute("data-s3-upload")]){var o=plupload.instances[y.getAttribute("data-s3-upload")][i];o.custom.error=!1,2!==o.state&&o.custom.files_upload>0&&(n=!0),o.file_data_name||o.url||a.push({tag_id:o.custom.tag_id,dictionary_id:o.custom.dictionary_id}),o.custom.upload_successful||(r=!1),o.custom.required&&(s=!0)}if(n){if(y.onsubmit=function(){return alert(S("JS_WAIT_UPLOAD_FILE")),!1},a.length){var l={upload_fields:a},d="/-/x-api/v1/public/?method=mosaic/anketaGetUploadData&param[form_id]="+plupload.instances[y.getAttribute("data-s3-upload")][0].custom.form_id;e.post(d,l,I)}else P();return!1}return r?(C(),!1):(s&&alert(s3.loc("JS_FORM_REQUIRED_FIELD")),r)}function I(e){if(e.result){var t=e.result,i=plupload.instances[y.getAttribute("data-s3-upload")];for(var n in t)if(t.hasOwnProperty(n)){let e=t[n],r="",s=!1,a="";if(L(e.upload_url)){const{upload_url:t,upload_token:i}=JSON.parse(e.upload_url);r=t,i.length&&(s=!0,a=i)}else r=e.upload_url;const o=e.upload_field,l=s?"files":o,d=U(s,a);i.filter((function(e,t,i){e.custom.tag_id===n&&(i[t].url=r,i[t].settings.url=r,i[t].file_data_name=l,i[t].settings.file_data_name=l,i[t].headers=d,i[t].settings.headers=d)}))}P()}}function P(){try{for(var e in plupload.instances[y.getAttribute("data-s3-upload")])plupload.instances[y.getAttribute("data-s3-upload")][e].start()}catch(e){console.warn(e)}}function D(t){e&&t&&e(t).unbind("submit")}function C(t=""){var i,n,r=!0;for(i in plupload.instances[y.getAttribute("data-s3-upload")])(!1===(n=plupload.instances[y.getAttribute("data-s3-upload")][i]).custom.upload_successful||n.custom.error)&&(r=!1);if(r){for(i in plupload.instances[y.getAttribute("data-s3-upload")]){var s=(n=plupload.instances[y.getAttribute("data-s3-upload")][i]).custom.files;s.length>0&&(n.custom.hiddenUploadInput.value=x(s))}if(t.length){let e=document.createElement("input");e.type="hidden",e.name="token",e.value=t,y.append(e)}y.onsubmit=null,function(t){if(e&&t&&plupload.instances[t.getAttribute("data-s3-upload")])for(var i=0;i<plupload.instances[t.getAttribute("data-s3-upload")].length;i++)if(plupload.instances[t.getAttribute("data-s3-upload")][i].custom.formSubmitEvents)for(var n=0;n<plupload.instances[t.getAttribute("data-s3-upload")][i].custom.formSubmitEvents.length;n++)e(t).submit(plupload.instances[t.getAttribute("data-s3-upload")][i].custom.formSubmitEvents[n])}(y),e?e(y).submit():y.submit()}D(y),y.onsubmit=R}function O(e,t){try{var i=new d(e,this.custom.progress_target);i.setProgress(t),i.setStatus(S("JS_LOADING")),i.toggleCancel(!1)}catch(e){}}function A(e,t){if("string"==typeof t){const e=JSON.parse(t);t=e.result?e.result:e[0]}else t=t.result;const i=void 0!==t.error&&t.error;this.custom.files_upload--;var n=new d(e,this.custom.progress_target);i?(n.setError(),n.setStatus(t.error),n.toggleCancel(!0,this),this.custom.error=!0):(n.setComplete(),n.setStatus(S("JS_COMPLETE")),n.toggleCancel(!1),this.custom.files.push({url:t.filename[0],filename:t.filename[1]}))}function T(e,t){this.custom.files_upload<=0?(this.custom.error||(this.custom.upload_successful=!0),!t&&this.headers&&this.headers.Authorization&&(t=this.headers.Authorization.split(" ")[1]),C.call(this,t)):this.custom.upload_successful=!1}function N(e,t){try{if(b.custom.upload_successful=!1,b.custom.files_count<=0)this.removeFile(e);else{var i=new d(e,t);i.setStatus(S("JS_QUEUED")),i.toggleCancel(!0,this,e),b.custom.files_upload++,b.custom.disableButton(--b.custom.files_count<=0)}}catch(e){}}function L(e){if(!e)return!1;try{JSON.parse(e)}catch(e){return!1}return!0}function U(e,t){return e&&t.length?{Authorization:`bearer ${t}`}:null}"loading"!==document.readyState?w():document.addEventListener("DOMContentLoaded",(function(){w()}))}},5433:(e,t,n)=>{var r,s,a,o,l;function d(e,t){if(this.fileProgressID=e.id,this.opacity=100,this.height=0,this.fileProgressWrapper=document.getElementById(this.fileProgressID),this.fileProgressWrapper)this.fileProgressElement=this.fileProgressWrapper.firstChild,this.reset();else{this.fileProgressWrapper=document.createElement("div"),this.fileProgressWrapper.className="progressWrapper",this.fileProgressWrapper.id=this.fileProgressID,this.fileProgressElement=document.createElement("div"),this.fileProgressElement.className="progressContainer";var i=document.createElement("a");i.className="progressCancel",i.href="#",i.style.visibility="hidden",i.appendChild(document.createTextNode(" "));var n=document.createElement("div");n.className="progressName",n.appendChild(document.createTextNode(e.name));var r=document.createElement("div");r.className="progressBarInProgress";var s=document.createElement("div");s.className="progressBarStatus",s.innerHTML="&nbsp;",this.fileProgressElement.appendChild(i),this.fileProgressElement.appendChild(n),this.fileProgressElement.appendChild(s),this.fileProgressElement.appendChild(r),this.fileProgressWrapper.appendChild(this.fileProgressElement);var a=document.getElementById(t);a.appendChild(this.fileProgressWrapper),a.classList.remove("is-removed")}this.height=this.fileProgressWrapper.offsetHeight,this.setTimer(null)}n.r(t),n.d(t,{default:()=>u}),function(){var e,t,i=0,n=[],r={},s={},a={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},o=/[<>&\"\']/g,l=window.setTimeout,d={};function u(){this.returnValue=!1}function c(){this.cancelBubble=!0}!function(e){var t,i,n,r="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe".split(/,/);for(t=0;t<r.length;t+=2)for(n=r[t+1].split(/ /),i=0;i<n.length;i++)s[n[i]]=r[t]}();var p,g,f,h,m,v,E={VERSION:"@@version@@",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:s,ua:(h=navigator,m=h.userAgent,v=h.vendor,f=(p=/WebKit/.test(m))&&-1!==v.indexOf("Apple"),g=window.opera&&window.opera.buildNumber,{windows:-1!==navigator.platform.indexOf("Win"),android:/Android/.test(m),ie:!p&&!g&&/MSIE/gi.test(m)&&/Explorer/gi.test(h.appName),webkit:p,gecko:!p&&/Gecko/.test(m),safari:f,opera:!!g}),typeOf:function(e){return{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(e){return E.each(arguments,(function(t,i){i>0&&E.each(t,(function(t,i){e[i]=t}))})),e},cleanName:function(e){var t,i;for(i=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],t=0;t<i.length;t+=2)e=e.replace(i[t],i[t+1]);return e=(e=e.replace(/\s+/g,"_")).replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(e,t){return t.name=e,n[e]=t,n.push(t),t},guid:function(){var e,t=(new Date).getTime().toString(32);for(e=0;e<5;e++)t+=Math.floor(65535*Math.random()).toString(32);return(E.guidPrefix||"p")+t+(i++).toString(32)},buildUrl:function(e,t){var i="";return E.each(t,(function(e,t){i+=(i?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)})),i&&(e+=(e.indexOf("?")>0?"&":"?")+i),e},each:function(t,i){var n,r,s;if(t)if((n=t.length)===e){for(r in t)if(t.hasOwnProperty(r)&&!1===i(t[r],r))return}else for(s=0;s<n;s++)if(!1===i(t[s],s))return},formatSize:function(t){return t===e||/\D/.test(t)?E.translate("N/A"):t>1073741824?Math.round(t/1073741824,1)+" GB":t>1048576?Math.round(t/1048576,1)+" MB":t>1024?Math.round(t/1024,1)+" KB":t+" b"},getPos:function(e,t){var i,n,r,s=0,a=0,o=document;function l(e){var t,i,n=0,r=0;return e&&(i=e.getBoundingClientRect(),t="CSS1Compat"===o.compatMode?o.documentElement:o.body,n=i.left+t.scrollLeft,r=i.top+t.scrollTop),{x:n,y:r}}if(t=t||o.body,e&&e.getBoundingClientRect&&E.ua.ie&&(!o.documentMode||o.documentMode<8))return n=l(e),r=l(t),{x:n.x-r.x,y:n.y-r.y};for(i=e;i&&i!=t&&i.nodeType;)s+=i.offsetLeft||0,a+=i.offsetTop||0,i=i.offsetParent;for(i=e.parentNode;i&&i!=t&&i.nodeType;)s-=i.scrollLeft||0,a-=i.scrollTop||0,i=i.parentNode;return{x:s,y:a}},getSize:function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}},parseSize:function(e){var t;return"string"==typeof e&&(t=(e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,"")))[2],e=+e[1],"g"==t&&(e*=1073741824),"m"==t&&(e*=1048576),"k"==t&&(e*=1024)),e},xmlEncode:function(e){return e?(""+e).replace(o,(function(e){return a[e]?"&"+a[e]+";":e})):e},toArray:function(e){var t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i},inArray:function(e,t){if(t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i}return-1},addI18n:function(e){return E.extend(r,e)},translate:function(e){return r[e]||e},isEmptyObj:function(t){if(t===e)return!0;for(var i in t)return!1;return!0},hasClass:function(e,t){return""!=e.className&&new RegExp("(^|\\s+)"+t+"(\\s+|$)").test(e.className)},addClass:function(e,t){E.hasClass(e,t)||(e.className=""==e.className?t:e.className.replace(/\s+$/,"")+" "+t)},removeClass:function(e,t){var i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(i,(function(e,t,i){return" "===t&&" "===i?" ":""}))},getStyle:function(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null)[t]:void 0},addEvent:function(i,n,r){var s,a,o;o=arguments[3],n=n.toLowerCase(),t===e&&(t="Plupload_"+E.guid()),i.addEventListener?(s=r,i.addEventListener(n,s,!1)):i.attachEvent&&(s=function(){var e=window.event;e.target||(e.target=e.srcElement),e.preventDefault=u,e.stopPropagation=c,r(e)},i.attachEvent("on"+n,s)),i[t]===e&&(i[t]=E.guid()),d.hasOwnProperty(i[t])||(d[i[t]]={}),(a=d[i[t]]).hasOwnProperty(n)||(a[n]=[]),a[n].push({func:s,orig:r,key:o})},removeEvent:function(i,n){var r,s,a;if("function"==typeof arguments[2]?s=arguments[2]:a=arguments[2],n=n.toLowerCase(),i[t]&&d[i[t]]&&d[i[t]][n]){for(var o=(r=d[i[t]][n]).length-1;o>=0&&(r[o].key!==a&&r[o].orig!==s||(i.removeEventListener?i.removeEventListener(n,r[o].func,!1):i.detachEvent&&i.detachEvent("on"+n,r[o].func),r[o].orig=null,r[o].func=null,r.splice(o,1),s===e));o--);if(r.length||delete d[i[t]][n],E.isEmptyObj(d[i[t]])){delete d[i[t]];try{delete i[t]}catch(n){i[t]=e}}}},removeAllEvents:function(i){var n=arguments[1];i[t]!==e&&i[t]&&E.each(d[i[t]],(function(e,t){E.removeEvent(i,t,n)}))}};E.Uploader=function(t){var i,r,s={},a=[],o=!1;function d(){var e,t,i=0;if(this.state==E.STARTED){for(t=0;t<a.length;t++)e||a[t].status!=E.QUEUED?i++:((e=a[t]).status=E.UPLOADING,this.trigger("BeforeUpload",e)&&this.trigger("UploadFile",e));i==a.length&&(this.stop(),this.trigger("UploadComplete",a))}}function u(){var t,n;for(i.reset(),t=0;t<a.length;t++)(n=a[t]).size!==e?(i.size+=n.size,i.loaded+=n.loaded):i.size=e,n.status==E.DONE?i.uploaded++:n.status==E.FAILED?i.failed++:i.queued++;i.size===e?i.percent=a.length>0?Math.ceil(i.uploaded/a.length*100):0:(i.bytesPerSec=Math.ceil(i.loaded/((+new Date-r||1)/1e3)),i.percent=i.size>0?Math.ceil(i.loaded/i.size*100):0)}i=new E.QueueProgress,t=E.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},t),E.extend(this,{state:E.STOPPED,runtime:"",features:{},files:a,settings:t,total:i,id:E.guid(),init:function(){var i,s,o,c=this,p=0;if("function"==typeof t.preinit?t.preinit(c):E.each(t.preinit,(function(e,t){c.bind(t,e)})),t.page_url=t.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(t.url)||(t.url=t.page_url+t.url),t.chunk_size=E.parseSize(t.chunk_size),t.max_file_size=E.parseSize(t.max_file_size),c.bind("FilesAdded",(function(i,n){var r,s,o,d=0,u=t.filters;for(u&&u.length&&(o=[],E.each(u,(function(e){E.each(e.extensions.split(/,/),(function(e){/^\s*\*\s*$/.test(e)?o.push("\\.*"):o.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))}))})),o=new RegExp(o.join("|")+"$","i")),r=0;r<n.length;r++)(s=n[r]).loaded=0,s.percent=0,s.status=E.QUEUED,!o||o.test(s.name)?s.size!==e&&s.size>t.max_file_size?i.trigger("Error",{code:E.FILE_SIZE_ERROR,message:E.translate("File size error."),file:s}):(a.push(s),d++):i.trigger("Error",{code:E.FILE_EXTENSION_ERROR,message:E.translate("File extension error."),file:s});if(!d)return!1;l((function(){c.trigger("QueueChanged"),c.refresh()}),1)})),t.unique_names&&c.bind("UploadFile",(function(e,t){var i=t.name.match(/\.([^.]+)$/),n="tmp";i&&(n=i[1]),t.target_name=t.id+"."+n})),c.bind("UploadProgress",(function(e,t){t.percent=t.size>0?Math.ceil(t.loaded/t.size*100):100,u()})),c.bind("StateChanged",(function(e){if(e.state==E.STARTED)r=+new Date;else if(e.state==E.STOPPED)for(i=e.files.length-1;i>=0;i--)e.files[i].status==E.UPLOADING&&(e.files[i].status=E.QUEUED,u())})),c.bind("QueueChanged",u),c.bind("Error",(function(e,t){t.file&&(t.file.status=E.FAILED,u(),e.state==E.STARTED&&l((function(){d.call(c)}),1))})),c.bind("FileUploaded",(function(e,t){t.status=E.DONE,t.loaded=t.size,e.trigger("UploadProgress",t),l((function(){d.call(c)}),1)})),t.runtimes)for(s=[],o=t.runtimes.split(/\s?,\s?/),i=0;i<o.length;i++)n[o[i]]&&s.push(n[o[i]]);else s=n;!function e(){var t,i,n,r=s[p++];if(r){if(t=r.getFeatures(),i=c.settings.required_features)for(i=i.split(","),n=0;n<i.length;n++)if(!t[i[n]])return void e();r.init(c,(function(i){i&&i.success?(c.features=t,c.runtime=r.name,c.trigger("Init",{runtime:r.name}),c.trigger("PostInit"),c.refresh()):e()}))}else c.trigger("Error",{code:E.INIT_ERROR,message:E.translate("Init error.")})}(),"function"==typeof t.init?t.init(c):E.each(t.init,(function(e,t){c.bind(t,e)}))},refresh:function(){this.trigger("Refresh")},start:function(){a.length&&this.state!=E.STARTED&&(this.state=E.STARTED,this.trigger("StateChanged"),d.call(this))},stop:function(){this.state!=E.STOPPED&&(this.state=E.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},disableBrowse:function(){o=arguments[0]===e||arguments[0],this.trigger("DisableBrowse",o)},getFile:function(e){var t;for(t=a.length-1;t>=0;t--)if(a[t].id===e)return a[t]},removeFile:function(e){var t;for(t=a.length-1;t>=0;t--)if(a[t].id===e.id)return this.splice(t,1)[0]},splice:function(t,i){var n;return n=a.splice(t===e?0:t,i===e?a.length:i),this.trigger("FilesRemoved",n),this.trigger("QueueChanged"),n},trigger:function(e){var t,i,n=s[e.toLowerCase()];if(n)for((i=Array.prototype.slice.call(arguments))[0]=this,t=0;t<n.length;t++)if(!1===n[t].func.apply(n[t].scope,i))return!1;return!0},hasEventListener:function(e){return!!s[e.toLowerCase()]},bind:function(e,t,i){var n;e=e.toLowerCase(),(n=s[e]||[]).push({func:t,scope:i||this}),s[e]=n},unbind:function(t){t=t.toLowerCase();var i,n=s[t],r=arguments[1];if(n){if(r!==e){for(i=n.length-1;i>=0;i--)if(n[i].func===r){n.splice(i,1);break}}else n=[];n.length||delete s[t]}},unbindAll:function(){var e=this;E.each(s,(function(t,i){e.unbind(i)}))},destroy:function(){this.stop(),this.trigger("Destroy"),this.unbindAll()}})},E.File=function(e,t,i){var n=this;n.id=e,n.name=t,n.size=i,n.loaded=0,n.percent=0,n.status=0},E.Runtime=function(){this.getFeatures=function(){},this.init=function(e,t){}},E.QueueProgress=function(){var e=this;e.size=0,e.loaded=0,e.uploaded=0,e.failed=0,e.queued=0,e.percent=0,e.bytesPerSec=0,e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}},E.runtimes={},window.plupload=E}(),function(){if(!window.google||!google.gears){var e=null;if("undefined"!=typeof GearsFactory)e=new GearsFactory;else try{-1!=(e=new ActiveXObject("Gears.Factory")).getBuildInfo().indexOf("ie_mobile")&&e.privateSetGlobalObject(this)}catch(t){void 0!==navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&((e=document.createElement("object")).style.display="none",e.width=0,e.height=0,e.type="application/x-googlegears",document.documentElement.appendChild(e))}e&&(window.google||(window.google={}),google.gears||(google.gears={factory:e}))}}(),r=window,s=document,a=plupload,o={},a.runtimes.Gears=a.addRuntime("gears",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(e,t){var i,n,l=!1;if(!r.google||!google.gears)return t({success:!1});try{i=google.gears.factory.create("beta.desktop")}catch(e){return t({success:!1})}function d(t){var i,n,r,s=[];for(n=0;n<t.length;n++)i=t[n],r=a.guid(),o[r]=i.blob,s.push(new a.File(r,i.name,i.blob.length));e.trigger("FilesAdded",s)}e.bind("PostInit",(function(){var t=e.settings,n=s.getElementById(t.drop_element);n&&(a.addEvent(n,"dragover",(function(e){i.setDropEffect(e,"copy"),e.preventDefault()}),e.id),a.addEvent(n,"drop",(function(e){var t=i.getDragData(e,"application/x-gears-files");t&&d(t.files),e.preventDefault()}),e.id),n=0),a.addEvent(s.getElementById(t.browse_button),"click",(function(e){var n,r,s,a=[];if(e.preventDefault(),!l){e:for(n=0;n<t.filters.length;n++)for(s=t.filters[n].extensions.split(","),r=0;r<s.length;r++){if("*"===s[r]){a=[];break e}a.push("."+s[r])}i.openFiles(d,{singleFile:!t.multi_selection,filter:a})}}),e.id)})),e.bind("CancelUpload",(function(){n.abort&&n.abort()})),e.bind("UploadFile",(function(e,t){var i,r,s,l=0,d=0,u=e.settings.resize;u&&/\.(png|jpg|jpeg)$/i.test(t.name)&&(o[t.id]=function(e,t,i){var n,r;n=google.gears.factory.create("beta.canvas");try{if(n.decode(e),t.width||(t.width=n.width),t.height||(t.height=n.height),(r=Math.min(t.width/n.width,t.height/n.height))<1)n.resize(Math.round(n.width*r),Math.round(n.height*r));else if(!t.quality||"image/jpeg"!==i)return e;return t.quality?n.encode(i,{quality:t.quality/100}):n.encode(i)}catch(e){}return e}(o[t.id],u,/\.png$/i.test(t.name)?"image/png":"image/jpeg")),t.size=o[t.id].length,r=e.settings.chunk_size,s=r>0,i=Math.ceil(t.size/r),s||(r=t.size,i=1),function u(){var c,p,g,f,h,m,v,E,b=e.settings.multipart,y=0,_={name:t.target_name||t.name},w=e.settings.url;t.status!=a.DONE&&t.status!=a.FAILED&&e.state!=a.STOPPED&&(s&&(_.chunk=l,_.chunks=i),c=Math.min(r,t.size-l*r),b||(w=a.buildUrl(e.settings.url,_)),(n=google.gears.factory.create("beta.httprequest")).open("POST",w),b||(n.setRequestHeader("Content-Disposition",'attachment; filename="'+t.name+'"'),n.setRequestHeader("Content-Type","application/octet-stream")),a.each(e.settings.headers,(function(e,t){n.setRequestHeader(t,e)})),n.upload.onprogress=function(i){t.loaded=d+i.loaded-y,e.trigger("UploadProgress",t)},n.onreadystatechange=function(){var r;if(4==n.readyState&&e.state!==a.STOPPED)if(200==n.status){if(r={chunk:l,chunks:i,response:n.responseText,status:n.status},e.trigger("ChunkUploaded",t,r),r.cancelled)return void(t.status=a.FAILED);d+=c,++l>=i?(t.status=a.DONE,e.trigger("FileUploaded",t,{response:n.responseText,status:n.status})):u()}else e.trigger("Error",{code:a.HTTP_ERROR,message:a.translate("HTTP Error."),file:t,chunk:l,chunks:i,status:n.status})},l<i&&(p=o[t.id].slice(l*r,c),m="----pluploadboundary"+a.guid(),v="--",E="\r\n",b&&(n.setRequestHeader("Content-Type","multipart/form-data; boundary="+m),g=google.gears.factory.create("beta.blobbuilder"),a.each(a.extend(_,e.settings.multipart_params),(function(e,t){g.append(v+m+E+'Content-Disposition: form-data; name="'+t+'"'+E+E),g.append(e+E)})),h=a.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",g.append(v+m+E+'Content-Disposition: form-data; name="'+e.settings.file_data_name+'"; filename="'+t.name+'"\r\nContent-Type: '+h+E+E),g.append(p),g.append(E+v+m+v+E),f=g.getAsBlob(),y=f.length-p.length,p=f),n.send(p)))}()})),e.bind("DisableBrowse",(function(e,t){l=t})),e.bind("Destroy",(function(e){var t,i,n={browseButton:e.settings.browse_button,dropElm:e.settings.drop_element};for(t in n)(i=s.getElementById(n[t]))&&a.removeAllEvents(i,e.id)})),t({success:!0})}}),function(e,t,i,n){var r={},s={};function a(e){var t,i,r,s,o=typeof e;if(e===n||null===e)return"null";if("string"===o)return t="\bb\tt\nn\ff\rr\"\"''\\\\",'"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,(function(e,i){var n=t.indexOf(i);return n+1?"\\"+t.charAt(n+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)}))+'"';if("object"==o){if(i=e.length!==n,t="",i){for(r=0;r<e.length;r++)t&&(t+=","),t+=a(e[r]);t="["+t+"]"}else{for(s in e)e.hasOwnProperty(s)&&(t&&(t+=","),t+=a(s)+":"+a(e[s]));t="{"+t+"}"}return t}return""+e}i.silverlight={trigger:function(e,t){var n,s=r[e];s&&((n=i.toArray(arguments).slice(1))[0]="Silverlight:"+t,setTimeout((function(){s.trigger.apply(s,n)}),0))}},i.runtimes.Silverlight=i.addRuntime("silverlight",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(n,o){var l,d,u="",c=n.settings.filters,p=t.body;if(!function(e){var t,i,n,r,s,a=!1,o=0;try{try{new ActiveXObject("AgControl.AgControl").IsVersionSupported(e)&&(a=!0)}catch(d){var l=navigator.plugins["Silverlight Plug-In"];if(l){for("1.0.30226.2"===(t=l.description)&&(t="2.0.30226.2"),i=t.split(".");i.length>3;)i.pop();for(;i.length<4;)i.push(0);for(n=e.split(".");n.length>4;)n.pop();do{r=parseInt(n[o],10),s=parseInt(i[o],10),o++}while(o<n.length&&r===s);r<=s&&!isNaN(r)&&(a=!0)}}}catch(e){a=!1}return a}("2.0.31005.0")||e.opera&&e.opera.buildNumber)o({success:!1});else{for(s[n.id]=!1,r[n.id]=n,(l=t.createElement("div")).id=n.id+"_silverlight_container",i.extend(l.style,{position:"absolute",top:"0px",background:n.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100px",height:"100px",overflow:"hidden",opacity:n.settings.shim_bgcolor||t.documentMode>8?"":.01}),l.className="plupload silverlight",n.settings.container&&(p=t.getElementById(n.settings.container),"static"===i.getStyle(p,"position")&&(p.style.position="relative")),p.appendChild(l),d=0;d<c.length;d++)u+=(""!=u?"|":"")+c[d].title+" | *."+c[d].extensions.replace(/,/g,";*.");l.innerHTML='<object id="'+n.id+'_silverlight" data="data:application/x-silverlight," type="application/x-silverlight-2" style="outline:none;" width="1024" height="1024"><param name="source" value="'+n.settings.silverlight_xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="id='+n.id+",filter="+u+",multiselect="+n.settings.multi_selection+'"/></object>',n.bind("Silverlight:Init",(function(){var e,l={};s[n.id]||(s[n.id]=!0,n.bind("Silverlight:StartSelectFiles",(function(t){e=[]})),n.bind("Silverlight:SelectFile",(function(t,n,r,s){var a;a=i.guid(),l[a]=n,l[n]=a,e.push(new i.File(a,r,s))})),n.bind("Silverlight:SelectSuccessful",(function(){e.length&&n.trigger("FilesAdded",e)})),n.bind("Silverlight:UploadChunkError",(function(e,t,r,s,a){n.trigger("Error",{code:i.IO_ERROR,message:"IO Error.",details:a,file:e.getFile(l[t])})})),n.bind("Silverlight:UploadFileProgress",(function(e,t,n,r){var s=e.getFile(l[t]);s.status!=i.FAILED&&(s.size=r,s.loaded=n,e.trigger("UploadProgress",s))})),n.bind("Refresh",(function(e){var n,r,s;(n=t.getElementById(e.settings.browse_button))&&(r=i.getPos(n,t.getElementById(e.settings.container)),s=i.getSize(n),i.extend(t.getElementById(e.id+"_silverlight_container").style,{top:r.y+"px",left:r.x+"px",width:s.w+"px",height:s.h+"px"}))})),n.bind("Silverlight:UploadChunkSuccessful",(function(e,t,n,r,s){var a,o=e.getFile(l[t]);a={chunk:n,chunks:r,response:s},e.trigger("ChunkUploaded",o,a),o.status!=i.FAILED&&e.state!==i.STOPPED&&g().UploadNextChunk(),n==r-1&&(o.status=i.DONE,e.trigger("FileUploaded",o,{response:s}))})),n.bind("Silverlight:UploadSuccessful",(function(e,t,n){var r=e.getFile(l[t]);r.status=i.DONE,e.trigger("FileUploaded",r,{response:n})})),n.bind("FilesRemoved",(function(e,t){var i;for(i=0;i<t.length;i++)g().RemoveFile(l[t[i].id])})),n.bind("UploadFile",(function(e,t){var n=e.settings,r=n.resize||{};g().UploadFile(l[t.id],e.settings.url,a({name:t.target_name||t.name,mime:i.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:n.chunk_size,image_width:r.width,image_height:r.height,image_quality:r.quality,multipart:!!n.multipart,multipart_params:n.multipart_params||{},file_data_name:n.file_data_name,headers:n.headers}))})),n.bind("CancelUpload",(function(){g().CancelUpload()})),n.bind("Silverlight:MouseEnter",(function(e){var r,s;r=t.getElementById(n.settings.browse_button),s=e.settings.browse_button_hover,r&&s&&i.addClass(r,s)})),n.bind("Silverlight:MouseLeave",(function(e){var r,s;r=t.getElementById(n.settings.browse_button),s=e.settings.browse_button_hover,r&&s&&i.removeClass(r,s)})),n.bind("Silverlight:MouseLeftButtonDown",(function(e){var r,s;r=t.getElementById(n.settings.browse_button),s=e.settings.browse_button_active,r&&s&&(i.addClass(r,s),i.addEvent(t.body,"mouseup",(function(){i.removeClass(r,s)})))})),n.bind("Sliverlight:StartSelectFiles",(function(e){var r,s;r=t.getElementById(n.settings.browse_button),s=e.settings.browse_button_active,r&&s&&i.removeClass(r,s)})),n.bind("DisableBrowse",(function(e,t){g().DisableBrowse(t)})),n.bind("Destroy",(function(e){var n;i.removeAllEvents(t.body,e.id),delete s[e.id],delete r[e.id],(n=t.getElementById(e.id+"_silverlight_container"))&&n.parentNode.removeChild(n)})),o({success:!0}))}))}function g(){return t.getElementById(n.id+"_silverlight").content.Upload}}})}(window,document,plupload),function(e,t,i,n){var r={},s={};i.flash={trigger:function(e,t,i){setTimeout((function(){var n=r[e];n&&n.trigger("Flash:"+t,i)}),0)}},i.runtimes.Flash=i.addRuntime("flash",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,maxWidth:8091,maxHeight:8091,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(e,n){var a,o,l,d=0,u=t.body;(function(){var e;try{e=(e=navigator.plugins["Shockwave Flash"]).description}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(t){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1])})()<10?n({success:!1}):(s[e.id]=!1,r[e.id]=e,t.getElementById(e.settings.browse_button),(a=t.createElement("div")).id=e.id+"_flash_container",i.extend(a.style,{position:"absolute",top:"0px",background:e.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"}),a.className="plupload flash",e.settings.container&&(u=t.getElementById(e.settings.container),"static"===i.getStyle(u,"position")&&(u.style.position="relative")),u.appendChild(a),o='<object id="'+e.id+'_flash" type="application/x-shockwave-flash" data="'+e.settings.flash_swf_url+'" ',i.ua.ie&&(o+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),o+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+e.settings.flash_swf_url+'" /><param name="flashvars" value="id='+escape(e.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',i.ua.ie?(l=t.createElement("div"),a.appendChild(l),l.outerHTML=o,l=null):a.innerHTML=o,function t(){d++>5e3?n({success:!1}):!1===s[e.id]&&setTimeout(t,1)}(),a=null,e.bind("Destroy",(function(e){var n;i.removeAllEvents(t.body,e.id),delete s[e.id],delete r[e.id],(n=t.getElementById(e.id+"_flash_container"))&&n.parentNode.removeChild(n)})),e.bind("Flash:Init",(function(){var r={};try{c().setFileFilters(e.settings.filters,e.settings.multi_selection)}catch(e){return void n({success:!1})}s[e.id]||(s[e.id]=!0,e.bind("UploadFile",(function(t,n){var s=t.settings,a=e.settings.resize||{};c().uploadFile(r[n.id],s.url,{name:n.target_name||n.name,mime:i.mimeTypes[n.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:s.chunk_size,width:a.width,height:a.height,quality:a.quality,multipart:s.multipart,multipart_params:s.multipart_params||{},file_data_name:s.file_data_name,format:/\.(jpg|jpeg)$/i.test(n.name)?"jpg":"png",headers:s.headers,urlstream_upload:s.urlstream_upload})})),e.bind("CancelUpload",(function(){c().cancelUpload()})),e.bind("Flash:UploadProcess",(function(e,t){var n=e.getFile(r[t.id]);n.status!=i.FAILED&&(n.loaded=t.loaded,n.size=t.size,e.trigger("UploadProgress",n))})),e.bind("Flash:UploadChunkComplete",(function(e,t){var n,s=e.getFile(r[t.id]);n={chunk:t.chunk,chunks:t.chunks,response:t.text},e.trigger("ChunkUploaded",s,n),s.status!==i.FAILED&&e.state!==i.STOPPED&&c().uploadNextChunk(),t.chunk==t.chunks-1&&(s.status=i.DONE,e.trigger("FileUploaded",s,{response:t.text}))})),e.bind("Flash:SelectFiles",(function(t,n){var s,a,o,l=[];for(a=0;a<n.length;a++)s=n[a],o=i.guid(),r[o]=s.id,r[s.id]=o,l.push(new i.File(o,s.name,s.size));l.length&&e.trigger("FilesAdded",l)})),e.bind("Flash:SecurityError",(function(t,n){e.trigger("Error",{code:i.SECURITY_ERROR,message:i.translate("Security error."),details:n.message,file:e.getFile(r[n.id])})})),e.bind("Flash:GenericError",(function(t,n){e.trigger("Error",{code:i.GENERIC_ERROR,message:i.translate("Generic error."),details:n.message,file:e.getFile(r[n.id])})})),e.bind("Flash:IOError",(function(t,n){e.trigger("Error",{code:i.IO_ERROR,message:i.translate("IO error."),details:n.message,file:e.getFile(r[n.id])})})),e.bind("Flash:ImageError",(function(t,n){e.trigger("Error",{code:parseInt(n.code,10),message:i.translate("Image error."),file:e.getFile(r[n.id])})})),e.bind("Flash:StageEvent:rollOver",(function(n){var r,s;r=t.getElementById(e.settings.browse_button),s=n.settings.browse_button_hover,r&&s&&i.addClass(r,s)})),e.bind("Flash:StageEvent:rollOut",(function(n){var r,s;r=t.getElementById(e.settings.browse_button),s=n.settings.browse_button_hover,r&&s&&i.removeClass(r,s)})),e.bind("Flash:StageEvent:mouseDown",(function(n){var r,s;r=t.getElementById(e.settings.browse_button),s=n.settings.browse_button_active,r&&s&&(i.addClass(r,s),i.addEvent(t.body,"mouseup",(function(){i.removeClass(r,s)}),n.id))})),e.bind("Flash:StageEvent:mouseUp",(function(n){var r,s;r=t.getElementById(e.settings.browse_button),s=n.settings.browse_button_active,r&&s&&i.removeClass(r,s)})),e.bind("Flash:ExifData",(function(t,i){e.trigger("ExifData",e.getFile(r[i.id]),i.data)})),e.bind("Flash:GpsData",(function(t,i){e.trigger("GpsData",e.getFile(r[i.id]),i.data)})),e.bind("QueueChanged",(function(t){e.refresh()})),e.bind("FilesRemoved",(function(e,t){var i;for(i=0;i<t.length;i++)c().removeFile(r[t[i].id])})),e.bind("StateChanged",(function(t){e.refresh()})),e.bind("Refresh",(function(n){var r,s,a;c().setFileFilters(e.settings.filters,e.settings.multi_selection),(r=t.getElementById(n.settings.browse_button))&&(s=i.getPos(r,t.getElementById(n.settings.container)),a=i.getSize(r),i.extend(t.getElementById(n.id+"_flash_container").style,{top:s.y+"px",left:s.x+"px",width:a.w+"px",height:a.h+"px"}))})),e.bind("DisableBrowse",(function(e,t){c().disableBrowse(t)})),n({success:!0}))})));function c(){return t.getElementById(e.id+"_flash")}}})}(window,document,plupload),(l=plupload).runtimes.BrowserPlus=l.addRuntime("browserplus",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(e,t){var i=window.BrowserPlus,n={},r=e.settings,s=r.resize;function a(t){var i,r,s,a=[];for(i=0;i<t.length;i++)r=t[i],s=l.guid(),n[s]=r,a.push(new l.File(s,r.name,r.size));i&&e.trigger("FilesAdded",a)}i?i.init((function(o){var d=[{service:"Uploader",version:"3"},{service:"DragAndDrop",version:"1"},{service:"FileBrowse",version:"1"},{service:"FileAccess",version:"2"}];s&&d.push({service:"ImageAlter",version:"4"}),o.success?i.require({services:d},(function(o){o.success?function(){var o=!1;e.bind("PostInit",(function(){var t,n=r.drop_element,s=e.id+"_droptarget",d=document.getElementById(n);function u(e,t){i.DragAndDrop.AddDropTarget({id:e},(function(n){i.DragAndDrop.AttachCallbacks({id:e,hover:function(e){!e&&t&&t()},drop:function(e){t&&t(),a(e)}},(function(){}))}))}d&&(document.attachEvent&&/MSIE/gi.test(navigator.userAgent)?((t=document.createElement("div")).setAttribute("id",s),l.extend(t.style,{position:"absolute",top:"-1000px",background:"red",filter:"alpha(opacity=0)",opacity:0}),document.body.appendChild(t),l.addEvent(d,"dragenter",(function(e){var t,i;t=document.getElementById(n),i=l.getPos(t),l.extend(document.getElementById(s).style,{top:i.y+"px",left:i.x+"px",width:t.offsetWidth+"px",height:t.offsetHeight+"px"})})),u(s,(function(){document.getElementById(s).style.top="-1000px"}))):u(n)),l.addEvent(document.getElementById(r.browse_button),"click",(function(e){var t,n,s,d,u=[],c=r.filters;if(e.preventDefault(),!o){e:for(t=0;t<c.length;t++)for(s=c[t].extensions.split(","),n=0;n<s.length;n++){if("*"===s[n]){u=[];break e}(d=l.mimeTypes[s[n]])&&-1===l.inArray(d,u)&&u.push(l.mimeTypes[s[n]])}i.FileBrowse.OpenBrowseDialog({mimeTypes:u},(function(e){e.success&&a(e.value)}))}})),d=t=null})),e.bind("CancelUpload",(function(){i.Uploader.cancel({},(function(){}))})),e.bind("DisableBrowse",(function(e,t){o=t})),e.bind("UploadFile",(function(e,t){var r,a=n[t.id],o={},d=e.settings.chunk_size,u=[];function c(n,s){var a;t.status!=l.FAILED&&(o.name=t.target_name||t.name,d&&(o.chunk=""+n,o.chunks=""+s),a=u.shift(),i.Uploader.upload({url:e.settings.url,files:{file:a},cookies:document.cookies,postvars:l.extend(o,e.settings.multipart_params),progressCallback:function(i){var s,o=0;for(r[n]=parseInt(i.filePercent*a.size/100,10),s=0;s<r.length;s++)o+=r[s];t.loaded=o,e.trigger("UploadProgress",t)}},(function(i){var r;i.success?(r=i.value.statusCode,d&&e.trigger("ChunkUploaded",t,{chunk:n,chunks:s,response:i.value.body,status:r}),u.length>0?c(++n,s):(t.status=l.DONE,e.trigger("FileUploaded",t,{response:i.value.body,status:r}),r>=400&&e.trigger("Error",{code:l.HTTP_ERROR,message:l.translate("HTTP Error."),file:t,status:r}))):e.trigger("Error",{code:l.GENERIC_ERROR,message:l.translate("Generic Error."),file:t,details:i.error})})))}function p(e){t.size=e.size,d?i.FileAccess.chunk({file:e,chunkSize:d},(function(e){if(e.success){var t=e.value,i=t.length;r=Array(i);for(var n=0;n<i;n++)r[n]=0,u.push(t[n]);c(0,i)}})):(r=Array(1),u.push(e),c(0,1))}s&&/\.(png|jpg|jpeg)$/i.test(t.name)?BrowserPlus.ImageAlter.transform({file:a,quality:s.quality||90,actions:[{scale:{maxwidth:s.width,maxheight:s.height}}]},(function(e){e.success&&p(e.value.file)})):p(a)})),t({success:!0})}():t()})):t()})):t()}}),function(e,t,n,r){var s,a={};function o(e,i,n){var r=e.naturalWidth,s=e.naturalHeight,a=n.width,o=n.height,l=i.getContext("2d");l.save();var d=function(e){var i=e.naturalWidth;if(i*e.naturalHeight>1048576){var n=t.createElement("canvas");n.width=n.height=1;var r=n.getContext("2d");return r.drawImage(e,1-i,0),0===r.getImageData(0,0,1,1).data[3]}return!1}(e);d&&(r/=2,s/=2);var u=1024,c=t.createElement("canvas");c.width=c.height=u;for(var p=c.getContext("2d"),g=function(e,i,n){var r=t.createElement("canvas");r.width=1,r.height=n;var s=r.getContext("2d");s.drawImage(e,0,0);for(var a=s.getImageData(0,0,1,n).data,o=0,l=n,d=n;d>o;)0===a[4*(d-1)+3]?l=d:o=d,d=l+o>>1;var u=d/n;return 0===u?1:u}(e,0,s),f=0;f<s;){for(var h=f+u>s?s-f:u,m=0;m<r;){var v=m+u>r?r-m:u;p.clearRect(0,0,u,u),p.drawImage(e,-m,-f);var E=m*a/r|0,b=Math.ceil(v*a/r),y=f*o/s/g|0,_=Math.ceil(h*o/s/g);l.drawImage(c,0,0,v,h,E,y,b,_),m+=u}f+=u}l.restore(),c=p=null}function l(t,i){var n;if(!("FileReader"in e))return i(t.getAsBinary());(n=new FileReader).readAsBinaryString(t),n.onload=function(){i(n.result)}}function d(i,n,r,s){var l,d,u,g=this;!function(t,i){var n;if(!("FileReader"in e))return i(t.getAsDataURL());(n=new FileReader).readAsDataURL(t),n.onload=function(){i(n.result)}}(a[i.id],(function(e){(l=t.createElement("canvas")).style.display="none",t.body.appendChild(l),(d=new Image).onerror=d.onabort=function(){s({success:!1})},d.onload=function(){var t,a,f,h;if(n.width||(n.width=d.width),n.height||(n.height=d.height),(u=Math.min(n.width/d.width,n.height/d.height))<1)t=Math.round(d.width*u),a=Math.round(d.height*u);else{if(!n.quality||"image/jpeg"!==r)return void s({success:!1});t=d.width,a=d.height}if(l.width=t,l.height=a,o(d,l,{width:t,height:a}),"image/jpeg"===r&&(f=new c(atob(e.substring(e.indexOf("base64,")+7)))).headers&&f.headers.length&&(h=new p).init(f.get("exif")[0])&&(h.setExif("PixelXDimension",t),h.setExif("PixelYDimension",a),f.set("exif",h.getBinary()),g.hasEventListener("ExifData")&&g.trigger("ExifData",i,h.EXIF()),g.hasEventListener("GpsData")&&g.trigger("GpsData",i,h.GPS())),n.quality&&"image/jpeg"===r)try{e=l.toDataURL(r,n.quality/100)}catch(t){e=l.toDataURL(r)}else e=l.toDataURL(r);e=e.substring(e.indexOf("base64,")+7),e=atob(e),f&&f.headers&&f.headers.length&&(e=f.restore(e),f.purge()),l.parentNode.removeChild(l),s({success:!0,data:e})},d.src=e}))}function u(){var e,t=!1;function i(i,n){var r,s=t?0:-8*(n-1),a=0;for(r=0;r<n;r++)a|=e.charCodeAt(i+r)<<Math.abs(s+8*r);return a}function n(t,i,n){n=3===arguments.length?n:e.length-i-1;e=e.substr(0,i)+t+e.substr(n+i)}return{II:function(e){if(e===r)return t;t=e},init:function(i){t=!1,e=i},SEGMENT:function(t,i,r){switch(arguments.length){case 1:return e.substr(t,e.length-t-1);case 2:return e.substr(t,i);case 3:n(r,t,i);break;default:return e}},BYTE:function(e){return i(e,1)},SHORT:function(e){return i(e,2)},LONG:function(e,s){if(s===r)return i(e,4);!function(e,i,r){var s,a="",o=t?0:-8*(r-1);for(s=0;s<r;s++)a+=String.fromCharCode(i>>Math.abs(o+8*s)&255);n(a,e,r)}(e,s,4)},SLONG:function(e){var t=i(e,4);return t>2147483647?t-4294967296:t},STRING:function(e,t){var n="";for(t+=e;e<t;e++)n+=String.fromCharCode(i(e,1));return n}}}function c(e){var t,i,n,s={65505:{app:"EXIF",name:"APP1",signature:"Exif\0"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\0"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\0"}},a=[],o=r,l=0;if((t=new u).init(e),65496===t.SHORT(0)){for(i=2,n=Math.min(1048576,e.length);i<=n;)if((o=t.SHORT(i))>=65488&&o<=65495)i+=2;else{if(65498===o||65497===o)break;l=t.SHORT(i+2)+2,s[o]&&t.STRING(i+4,s[o].signature.length)===s[o].signature&&a.push({hex:o,app:s[o].app.toUpperCase(),name:s[o].name.toUpperCase(),start:i,length:l,segment:t.SEGMENT(i,l)}),i+=l}return t.init(null),{headers:a,restore:function(e){t.init(e);var n=new c(e);if(!n.headers)return!1;for(var r=n.headers.length;r>0;r--){var s=n.headers[r-1];t.SEGMENT(s.start,s.length,"")}n.purge(),i=65504==t.SHORT(2)?4+t.SHORT(4):2;r=0;for(var o=a.length;r<o;r++)t.SEGMENT(i,0,a[r].segment),i+=a[r].length;return t.SEGMENT()},get:function(e){for(var t=[],i=0,n=a.length;i<n;i++)a[i].app===e.toUpperCase()&&t.push(a[i].segment);return t},set:function(e,t){var i=[];"string"==typeof t?i.push(t):i=t;for(var n=ii=0,r=a.length;n<r&&(a[n].app===e.toUpperCase()&&(a[n].segment=i[ii],a[n].length=i[ii].length,ii++),!(ii>=i.length));n++);},purge:function(){a=[],t.init(null)}}}}function p(){var e,t,s,a={};function o(t,i){var n,o,l,d,u,c,p,g=e.SHORT(t),f=[],h={};for(n=0;n<g;n++)if(c=t+12*n+2,(l=i[e.SHORT(c)])!==r){switch(d=e.SHORT(c+=2),u=e.LONG(c+=2),c+=4,f=[],d){case 1:case 7:for(u>4&&(c=e.LONG(c)+a.tiffHeader),o=0;o<u;o++)f[o]=e.BYTE(c+o);break;case 2:u>4&&(c=e.LONG(c)+a.tiffHeader),h[l]=e.STRING(c,u-1);continue;case 3:for(u>2&&(c=e.LONG(c)+a.tiffHeader),o=0;o<u;o++)f[o]=e.SHORT(c+2*o);break;case 4:for(u>1&&(c=e.LONG(c)+a.tiffHeader),o=0;o<u;o++)f[o]=e.LONG(c+4*o);break;case 5:for(c=e.LONG(c)+a.tiffHeader,o=0;o<u;o++)f[o]=e.LONG(c+4*o)/e.LONG(c+4*o+4);break;case 9:for(c=e.LONG(c)+a.tiffHeader,o=0;o<u;o++)f[o]=e.SLONG(c+4*o);break;case 10:for(c=e.LONG(c)+a.tiffHeader,o=0;o<u;o++)f[o]=e.SLONG(c+4*o)/e.SLONG(c+4*o+4);break;default:continue}p=1==u?f[0]:f,s.hasOwnProperty(l)&&"object"!=typeof p?h[l]=s[l][p]:h[l]=p}return h}return e=new u,t={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},s={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(i){return a={tiffHeader:10},!(i===r||!i.length)&&(e.init(i),65505===e.SHORT(0)&&"EXIF\0"===e.STRING(4,5).toUpperCase()&&function(){var i,n=a.tiffHeader;return e.II(18761==e.SHORT(n)),42===e.SHORT(n+=2)&&(a.IFD0=a.tiffHeader+e.LONG(n+=2),i=o(a.IFD0,t.tiff),a.exifIFD="ExifIFDPointer"in i?a.tiffHeader+i.ExifIFDPointer:r,a.gpsIFD="GPSInfoIFDPointer"in i?a.tiffHeader+i.GPSInfoIFDPointer:r,!0)}())},EXIF:function(){var e;if((e=o(a.exifIFD,t.exif)).ExifVersion&&"array"===n.typeOf(e.ExifVersion)){for(var i=0,r="";i<e.ExifVersion.length;i++)r+=String.fromCharCode(e.ExifVersion[i]);e.ExifVersion=r}return e},GPS:function(){var e;return(e=o(a.gpsIFD,t.gps)).GPSVersionID&&(e.GPSVersionID=e.GPSVersionID.join(".")),e},setExif:function(n,r){return("PixelXDimension"===n||"PixelYDimension"===n)&&function(n,r,s){var o,l,d,u=0;if("string"==typeof r){var c=t[n.toLowerCase()];for(hex in c)if(c[hex]===r){r=hex;break}}for(o=a[n.toLowerCase()+"IFD"],l=e.SHORT(o),i=0;i<l;i++)if(d=o+12*i+2,e.SHORT(d)==r){u=d+8;break}return!!u&&(e.LONG(u,s),!0)}("exif",n,r)},getBinary:function(){return e.SEGMENT()}}}n.runtimes.Html5=n.addRuntime("html5",{getFeatures:function(){var i,r,a,o,l,d,u;return r=a=l=d=!1,e.XMLHttpRequest&&(a=!!(i=new XMLHttpRequest).upload,r=!(!i.sendAsBinary&&!i.upload)),r&&(o=!!(i.sendAsBinary||e.Uint8Array&&e.ArrayBuffer),l=!(!File||!File.prototype.getAsDataURL&&!e.FileReader||!o),d=!(!File||!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))),s=n.ua.safari&&n.ua.windows,{html5:r,dragdrop:(u=t.createElement("div"),"draggable"in u||"ondragstart"in u&&"ondrop"in u),jpgresize:l,pngresize:l,multipart:l||!!e.FileReader||!!e.FormData,canSendBinary:o,cantSendBlobInFormData:!(!(n.ua.gecko&&e.FormData&&e.FileReader)||FileReader.prototype.readAsArrayBuffer)||n.ua.android,progress:a,chunks:d,multi_selection:!(n.ua.safari&&n.ua.windows),triggerDialog:n.ua.gecko&&e.FormData||n.ua.webkit}},init:function(i,r){var o,u;function c(e){var t,r,s,o=[],l={};for(r=0;r<e.length;r++)l[(t=e[r]).name]&&n.ua.safari&&n.ua.windows||(l[t.name]=!0,s=n.guid(),a[s]=t,o.push(new n.File(s,t.fileName||t.name,t.fileSize||t.size)));o.length&&i.trigger("FilesAdded",o)}(o=this.getFeatures()).html5?(i.bind("Init",(function(e){var r,s,a,o,l,d,u,p=[],g=e.settings.filters,f=t.body;(r=t.createElement("div")).id=e.id+"_html5_container",n.extend(r.style,{position:"absolute",background:i.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:i.settings.shim_bgcolor?"":0}),r.className="plupload html5",i.settings.container&&(f=t.getElementById(i.settings.container),"static"===n.getStyle(f,"position")&&(f.style.position="relative")),f.appendChild(r);e:for(a=0;a<g.length;a++)for(l=g[a].extensions.split(/,/),o=0;o<l.length;o++){if("*"===l[o]){p=[];break e}(d=n.mimeTypes[l[o]])&&-1===n.inArray(d,p)&&p.push(d)}if(r.innerHTML='<input id="'+i.id+'_html5"  style="font-size:99px" type="file" accept="'+p.join(",")+'" '+(i.settings.multi_selection&&i.features.multi_selection?'multiple="multiple"':"")+" />",r.scrollTop=100,u=t.getElementById(i.id+"_html5"),e.features.triggerDialog?n.extend(u.style,{position:"absolute",width:"100%",height:"100%"}):n.extend(u.style,{cssFloat:"right",styleFloat:"right"}),u.onchange=function e(){if(c(this.files),n.ua.ie){var t=this.cloneNode(!0);this.parentNode.replaceChild(t,this),t.onchange=e,t=null}else this.value=""},s=t.getElementById(e.settings.browse_button)){var h=e.settings.browse_button_hover,m=e.settings.browse_button_active,v=e.features.triggerDialog?s:r;h&&(n.addEvent(v,"mouseover",(function(){n.addClass(s,h)}),e.id),n.addEvent(v,"mouseout",(function(){n.removeClass(s,h)}),e.id)),m&&(n.addEvent(v,"mousedown",(function(){n.addClass(s,m)}),e.id),n.addEvent(t.body,"mouseup",(function(){n.removeClass(s,m)}),e.id)),e.features.triggerDialog&&n.addEvent(s,"click",(function(i){var n=t.getElementById(e.id+"_html5");n&&!n.disabled&&n.click(),i.preventDefault()}),e.id)}})),i.bind("PostInit",(function(){var e=t.getElementById(i.settings.drop_element);if(e){if(s)return void n.addEvent(e,"dragenter",(function(r){var s,a;(s=t.getElementById(i.id+"_drop"))||((s=t.createElement("input")).setAttribute("type","file"),s.setAttribute("id",i.id+"_drop"),s.setAttribute("multiple","multiple"),n.addEvent(s,"change",(function(){c(this.files),n.removeEvent(s,"change",i.id),s.parentNode.removeChild(s)}),i.id),n.addEvent(s,"dragover",(function(e){e.stopPropagation()}),i.id),e.appendChild(s)),n.getPos(e,t.getElementById(i.settings.container)),a=n.getSize(e),"static"===n.getStyle(e,"position")&&n.extend(e.style,{position:"relative"}),n.extend(s.style,{position:"absolute",display:"block",top:0,left:0,width:a.w+"px",height:a.h+"px",opacity:0})}),i.id);n.addEvent(e,"dragover",(function(e){e.preventDefault()}),i.id),n.addEvent(e,"drop",(function(e){var t=e.dataTransfer;t&&t.files&&c(t.files),e.preventDefault()}),i.id)}})),i.bind("Refresh",(function(e){var r,s,a,o,l;(r=t.getElementById(i.settings.browse_button))&&(s=n.getPos(r,t.getElementById(e.settings.container)),a=n.getSize(r),o=t.getElementById(i.id+"_html5_container"),n.extend(o.style,{top:s.y+"px",left:s.x+"px",width:a.w+"px",height:a.h+"px"}),i.features.triggerDialog&&("static"===n.getStyle(r,"position")&&n.extend(r.style,{position:"relative"}),l=parseInt(n.getStyle(r,"zIndex"),10),isNaN(l)&&(l=0),n.extend(r.style,{zIndex:l}),n.extend(o.style,{zIndex:l-1})))})),i.bind("DisableBrowse",(function(e,i){var n=t.getElementById(e.id+"_html5");n&&(n.disabled=i)})),i.bind("CancelUpload",(function(){u&&u.abort&&u.abort()})),i.bind("UploadFile",(function(t,i){var r,s=t.settings;function c(r){var a=0,l=0;!function d(){var c,p,g,f,h,m,v=1,E=t.settings.url;function b(e){if(u.sendAsBinary)u.sendAsBinary(e);else if(t.features.canSendBinary){for(var i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=255&e.charCodeAt(n);u.send(i.buffer)}}function y(r){var s,m=0,y="----pluploadboundary"+n.guid(),_="--",w="\r\n",S="";if((u=new XMLHttpRequest).upload&&(u.upload.onprogress=function(e){i.loaded=Math.min(i.size,l+e.loaded-m),t.trigger("UploadProgress",i)}),u.onreadystatechange=function(){var e,o;if(4==u.readyState&&t.state!==n.STOPPED){try{e=u.status}catch(t){e=0}if(e>=400)t.trigger("Error",{code:n.HTTP_ERROR,message:n.translate("HTTP Error."),file:i,status:e,response:u.responseText});else{if(v){if(o={chunk:a,chunks:v,response:u.responseText,status:e},t.trigger("ChunkUploaded",i,o),l+=f,o.cancelled)return void(i.status=n.FAILED);i.loaded=Math.min(i.size,(a+1)*g)}else i.loaded=i.size;t.trigger("UploadProgress",i),r=c=s=S=null,!v||++a>=v?(i.status=n.DONE,t.trigger("FileUploaded",i,{response:u.responseText,status:e})):d()}}},t.settings.multipart&&o.multipart){if(p.name=i.target_name||i.name,u.open("post",E,!0),n.each(t.settings.headers,(function(e,t){u.setRequestHeader(t,e)})),"string"!=typeof r&&e.FormData)return s=new FormData,n.each(n.extend(p,t.settings.multipart_params),(function(e,t){s.append(t,e)})),s.append(t.settings.file_data_name,r),void u.send(s);if("string"==typeof r)return u.setRequestHeader("Content-Type","multipart/form-data; boundary="+y),n.each(n.extend(p,t.settings.multipart_params),(function(e,t){S+=_+y+w+'Content-Disposition: form-data; name="'+t+'"'+w+w,S+=unescape(encodeURIComponent(e))+w})),h=n.mimeTypes[i.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",S+=_+y+w+'Content-Disposition: form-data; name="'+t.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(i.name))+'"'+"\r\nContent-Type: "+h+w+w+r+w+_+y+_+w,m=S.length-r.length,void b(r=S)}E=n.buildUrl(t.settings.url,n.extend(p,t.settings.multipart_params)),u.open("post",E,!0),u.setRequestHeader("Content-Type","application/octet-stream"),n.each(t.settings.headers,(function(e,t){u.setRequestHeader(t,e)})),"string"==typeof r?b(r):u.send(r)}i.status!=n.DONE&&i.status!=n.FAILED&&t.state!=n.STOPPED&&(p={name:i.target_name||i.name},s.chunk_size&&i.size>s.chunk_size&&(o.chunks||"string"==typeof r)?(g=s.chunk_size,v=Math.ceil(i.size/g),f=Math.min(g,i.size-a*g),c="string"==typeof r?r.substring(a*g,a*g+f):function(e,t,i){var n;if(!File.prototype.slice)return(n=File.prototype.webkitSlice||File.prototype.mozSlice)?n.call(e,t,i):null;try{return e.slice(),e.slice(t,i)}catch(n){return e.slice(t,i-t)}}(r,a*g,a*g+f)):(f=i.size,c=r),s.chunk_size&&o.chunks&&(p.chunk=a,p.chunks=v),t.settings.multipart&&o.multipart&&"string"!=typeof c&&e.FileReader&&o.cantSendBlobInFormData&&o.chunks&&t.settings.chunk_size?((m=new FileReader).onload=function(){y(m.result),m=null},m.readAsBinaryString(c)):y(c))}()}r=a[i.id],o.jpgresize&&t.settings.resize&&/\.(png|jpg|jpeg)$/i.test(i.name)?d.call(t,i,t.settings.resize,/\.png$/i.test(i.name)?"image/png":"image/jpeg",(function(e){e.success?(i.size=e.data.length,c(e.data)):o.chunks?c(r):l(r,c)})):!o.chunks&&o.jpgresize?l(r,c):c(r)})),i.bind("Destroy",(function(e){var i,r,s=t.body,a={inputContainer:e.id+"_html5_container",inputFile:e.id+"_html5",browseButton:e.settings.browse_button,dropElm:e.settings.drop_element};for(i in a)(r=t.getElementById(a[i]))&&n.removeAllEvents(r,e.id);n.removeAllEvents(t.body,e.id),e.settings.container&&(s=t.getElementById(e.settings.container)),s.removeChild(t.getElementById(a.inputContainer))})),r({success:!0})):r({success:!1})}})}(window,document,plupload),function(e,t,i,n){function r(e){return t.getElementById(e)}i.runtimes.Html4=i.addRuntime("html4",{getFeatures:function(){return{multipart:!0,triggerDialog:i.ua.gecko&&e.FormData||i.ua.webkit}},init:function(n,s){n.bind("Init",(function(s){var a,o,l,d,u,c,p,g=t.body,f=[],h=/MSIE/.test(navigator.userAgent),m=[],v=s.settings.filters;e:for(d=0;d<v.length;d++)for(u=v[d].extensions.split(/,/),p=0;p<u.length;p++){if("*"===u[p]){m=[];break e}(c=i.mimeTypes[u[p]])&&-1===i.inArray(c,m)&&m.push(c)}m=m.join(","),s.settings.container&&(g=r(s.settings.container),"static"===i.getStyle(g,"position")&&(g.style.position="relative")),s.bind("UploadFile",(function(e,n){var s;n.status!=i.DONE&&n.status!=i.FAILED&&e.state!=i.STOPPED&&(s=r("form_"+n.id),r("input_"+n.id).setAttribute("name",e.settings.file_data_name),s.setAttribute("action",e.settings.url),i.each(i.extend({name:n.target_name||n.name},e.settings.multipart_params),(function(e,n){var r=t.createElement("input");i.extend(r,{type:"hidden",name:n,value:e}),s.insertBefore(r,s.firstChild)})),o=n,r("form_"+l).style.top="-1048575px",s.submit())})),s.bind("FileUploaded",(function(e){e.refresh()})),s.bind("StateChanged",(function(n){n.state==i.STARTED?function(){var n=t.createElement("div");n.innerHTML='<iframe id="'+s.id+'_iframe" name="'+s.id+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',a=n.firstChild,g.appendChild(a),i.addEvent(a,"load",(function(t){var n,r,a=t.target;if(o){try{n=a.contentWindow.document||a.contentDocument||e.frames[a.id].document}catch(e){return void s.trigger("Error",{code:i.SECURITY_ERROR,message:i.translate("Security error."),file:o})}(r=n.documentElement.innerText||n.documentElement.textContent)&&(o.status=i.DONE,o.loaded=1025,o.percent=100,s.trigger("UploadProgress",o),s.trigger("FileUploaded",o,{response:r}))}}),s.id)}():n.state==i.STOPPED&&e.setTimeout((function(){i.removeEvent(a,"load",n.id),a.parentNode&&a.parentNode.removeChild(a)}),0),i.each(n.files,(function(e,t){if(e.status===i.DONE||e.status===i.FAILED){var n=r("form_"+e.id);n&&n.parentNode.removeChild(n)}}))})),s.bind("Refresh",(function(e){var n,s,a,o,d,u,c,p;(n=r(e.settings.browse_button))&&(d=i.getPos(n,r(e.settings.container)),u=i.getSize(n),c=r("form_"+l),r("input_"+l),i.extend(c.style,{top:d.y+"px",left:d.x+"px",width:u.w+"px",height:u.h+"px"}),e.features.triggerDialog&&("static"===i.getStyle(n,"position")&&i.extend(n.style,{position:"relative"}),p=parseInt(n.style.zIndex,10),isNaN(p)&&(p=0),i.extend(n.style,{zIndex:p}),i.extend(c.style,{zIndex:p-1})),a=e.settings.browse_button_hover,o=e.settings.browse_button_active,s=e.features.triggerDialog?n:c,a&&(i.addEvent(s,"mouseover",(function(){i.addClass(n,a)}),e.id),i.addEvent(s,"mouseout",(function(){i.removeClass(n,a)}),e.id)),o&&(i.addEvent(s,"mousedown",(function(){i.addClass(n,o)}),e.id),i.addEvent(t.body,"mouseup",(function(){i.removeClass(n,o)}),e.id)))})),n.bind("FilesRemoved",(function(e,t){var i,n;for(i=0;i<t.length;i++)(n=r("form_"+t[i].id))&&n.parentNode.removeChild(n)})),n.bind("DisableBrowse",(function(e,i){var n=t.getElementById("input_"+l);n&&(n.disabled=i)})),n.bind("Destroy",(function(e){var n,s,a,o={inputContainer:"form_"+l,inputFile:"input_"+l,browseButton:e.settings.browse_button};for(n in o)(s=r(o[n]))&&i.removeAllEvents(s,e.id);i.removeAllEvents(t.body,e.id),i.each(f,(function(e,t){(a=r("form_"+e))&&a.parentNode.removeChild(a)}))})),function e(){var a,o,d,u;l=i.guid(),f.push(l),(a=t.createElement("form")).setAttribute("id","form_"+l),a.setAttribute("method","post"),a.setAttribute("enctype","multipart/form-data"),a.setAttribute("encoding","multipart/form-data"),a.setAttribute("target",s.id+"_iframe"),a.style.position="absolute",(o=t.createElement("input")).setAttribute("id","input_"+l),o.setAttribute("type","file"),o.setAttribute("accept",m),o.setAttribute("size",1),u=r(s.settings.browse_button),s.features.triggerDialog&&u&&i.addEvent(r(s.settings.browse_button),"click",(function(e){o.disabled||o.click(),e.preventDefault()}),s.id),i.extend(o.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"}),i.extend(a.style,{overflow:"hidden"}),(d=s.settings.shim_bgcolor)&&(a.style.background=d),h&&i.extend(o.style,{filter:"alpha(opacity=0)"}),i.addEvent(o,"change",(function(t){var d,c=t.target,p=[];c.value&&(r("form_"+l).style.top="-1048575px",d=(d=c.value.replace(/\\/g,"/")).substring(d.length,d.lastIndexOf("/")+1),p.push(new i.File(l,d)),s.features.triggerDialog?i.removeEvent(u,"click",s.id):i.removeAllEvents(a,s.id),i.removeEvent(o,"change",s.id),e(),p.length&&n.trigger("FilesAdded",p))}),s.id),a.appendChild(o),g.appendChild(a),s.refresh()}()})),s({success:!0})}})}(window,document,plupload),d.prototype.setTimer=function(e){this.fileProgressElement.FP_TIMER=e},d.prototype.getTimer=function(e){return this.fileProgressElement.FP_TIMER||null},d.prototype.reset=function(){this.fileProgressElement.className="progressContainer",this.fileProgressElement.childNodes[2].innerHTML="&nbsp;",this.fileProgressElement.childNodes[2].className="progressBarStatus",this.fileProgressElement.childNodes[3].className="progressBarInProgress",this.fileProgressElement.childNodes[3].style.width="0%"},d.prototype.setProgress=function(e){this.fileProgressElement.className="progressContainer green",this.fileProgressElement.childNodes[3].className="progressBarInProgress",this.fileProgressElement.childNodes[3].style.width=e+"%"},d.prototype.setComplete=function(){this.fileProgressElement.className="progressContainer blue",this.fileProgressElement.childNodes[3].className="progressBarComplete",this.fileProgressElement.childNodes[3].style.width=""},d.prototype.setError=function(){this.fileProgressElement.className="progressContainer red",this.fileProgressElement.childNodes[3].className="progressBarError",this.fileProgressElement.childNodes[3].style.width=""},d.prototype.setCancelled=function(){this.fileProgressElement.className="progressContainer",this.fileProgressElement.childNodes[3].className="progressBarError",this.fileProgressElement.childNodes[3].style.width=""},d.prototype.setStatus=function(e){this.fileProgressElement.childNodes[2].innerHTML=e},d.prototype.toggleCancel=function(e,t,i){if(this.fileProgressElement.childNodes[0].style.visibility=e?"visible":"hidden",t){var n=this.fileProgressElement,r=this.fileProgressWrapper;this.fileProgressElement.childNodes[0].onclick=function(){return t.removeFile(i),t.custom.files_upload-=1,t.custom.upload_successful=!t.files.length,t.custom.disableButton(!++t.custom.files_count),n.className="progressContainer red",r.parentNode.removeChild(r),t.custom.files_upload<1&&document.getElementById(t.custom.progress_target).classList.add("is-removed"),!1}}},d.prototype.appear=function(){if(null!==this.getTimer()&&(clearTimeout(this.getTimer()),this.setTimer(null)),this.fileProgressWrapper.filters)try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=100}catch(e){this.fileProgressWrapper.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=100)"}else this.fileProgressWrapper.style.opacity=1;this.fileProgressWrapper.style.height="",this.height=this.fileProgressWrapper.offsetHeight,this.opacity=100,this.fileProgressWrapper.style.display=""},d.prototype.disappear=function(){if(this.opacity>0)if(this.opacity-=15,this.opacity<0&&(this.opacity=0),this.fileProgressWrapper.filters)try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=this.opacity}catch(e){this.fileProgressWrapper.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+this.opacity+")"}else this.fileProgressWrapper.style.opacity=this.opacity/100;if(this.height>0&&(this.height-=4,this.height<0&&(this.height=0),this.fileProgressWrapper.style.height=this.height+"px"),this.height>0||this.opacity>0){var e=this;this.setTimer(setTimeout((function(){e.disappear()}),30))}else this.fileProgressWrapper.style.display="none",this.setTimer(null)};const u=function(e,t,i,n,r,s,a,o,l,u,c,p,g,f,h,m){var v,E,b,y,_,w=function(){setTimeout((function(){plupload.instances||(plupload.instances=[]),document.getElementById(t).innerHTML="",v=document.getElementById(i),E=v.id,(b=function(){let e=!1,i="";if(L(c)){const{upload_url:t,upload_token:n}=JSON.parse(c);_=t,n.length&&(e=!0,i=n)}else _=c;const n=U(e,i);return new plupload.Uploader({file_data_name:e?"files":p,runtimes:"html5,flash,silverlight,html4",browse_button:E,url:_,filters:[],flash_swf_url:"/shared/s3/plupload/plupload.flash.swf",silverlight_xap_url:"/shared/s3/plupload/plupload.silverlight.xap",max_retries:3,headers:n,init:{FilesAdded:function(e,i){plupload.each(i,(function(i){N.call(e,i,t)}))},UploadProgress:function(e,t){O.call(this,t,t.percent)},Error:function(e,t){!function(e,t,i){try{if(t===SWFUpload.UPLOAD_ERROR.FILE_CANCELLED)return;switch(t){case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:return alert("There was a configuration error.  You will not be able to upload a resume at this time."),void this.debug("Error Code: No backend file, File name: "+e.name+", Message: "+i);case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:return alert("Upload Limit Exceeded."),void this.debug("Error Code: Upload Limit Exceeded, File name: "+e.name+", File size: "+e.size+", Message: "+i)}this.custom.error=!0;var n=new d(e,b.custom.progress_target);switch(n.setError(),n.toggleCancel(!0,this),t){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:n.setStatus(S("JS_HTTP_ERROR"));break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:n.setStatus(S("JS_UPLOAD_ERROR"));break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:n.setStatus(S("JS_SERVER_IO_ERROR"));break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:n.setStatus(S("JS_SECURITY_ERROR"));break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:n.setStatus(S("JS_UPLOAD_CANCELED"));break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:n.setStatus(S("JS_UPLOAD_STOPPED"))}}catch(e){}}(t.file,t.code,t.message)},FileUploaded:function(e,t,i){A.call(e,t,i.response)},UploadComplete:function(e,t){T.call(e,t,i)}}})}()).bind("PostInit",(function(){F(v),"object"!=typeof y?alert("No form!"):(b.custom.formSubmitEvents=function(t){if(!t||!e)return!1;t=e(t).get(0);var i=!1,n=[];if((e._data&&"function"==typeof e._data&&e._data(t,"events")&&e._data(t,"events").submit||e(t).data("events")&&e._data(t,"events").submit)&&(i=e._data(t,"events").submit),i){for(var r=0;r<i.length;r++)n.push(i[r].handler);return n}return!1}(y),b.custom.formSubmitEvents&&D(y),y.onsubmit=R)})),b.custom={files_count:u,my_index:o,files_upload:0,required:l,progress_target:t,upload_successful:!0,files:[],formSubmitEvents:!1,hiddenUploadInput:document.getElementById(n),dictionary_id:r,tag_id:s,form_id:a,disableButton:function(e){b.disableBrowse(e),document.getElementById(E).disabled=e}},b.init(),F(v),plupload.instances[y.getAttribute("data-s3-upload")]||(plupload.instances[y.getAttribute("data-s3-upload")]=[]),plupload.instances[y.getAttribute("data-s3-upload")].push(b)}),100)};function S(e){return window._s3Lang&&window._s3Lang[e]?window._s3Lang[e]:e.replace("JS_","").replace("_"," ").toLowerCase()}function x(e){var t=[],i="[object Array]"===Object.prototype.toString.apply(e);for(var n in e){var r=e[n];if("object"==typeof r)i?t.push(x(r)):t[n]=x(r);else{var s="";i||(s='"'+n+'":'),s+="number"==typeof r?r:!1===r?"false":!0===r?"true":'"'+r+'"',t.push(s)}}var a=t.join(",");return i?"["+a+"]":"{"+a+"}"}function F(e){if("object"!=typeof y){var t=e.parentNode;"form"===t.nodeName.toLowerCase()?(y=t).getAttribute("data-s3-upload")||y.setAttribute("data-s3-upload",o):F(e.parentNode)}}function R(t){(t=t||window.event).stopPropagation&&t.stopPropagation(),t.cancelBubble=!0;var i,n=!1,r=!0,s=!1,a=[];for(i in plupload.instances[y.getAttribute("data-s3-upload")]){var o=plupload.instances[y.getAttribute("data-s3-upload")][i];o.custom.error=!1,2!==o.state&&o.custom.files_upload>0&&(n=!0),o.file_data_name||o.url||a.push({tag_id:o.custom.tag_id,dictionary_id:o.custom.dictionary_id}),o.custom.upload_successful||(r=!1),o.custom.required&&(s=!0)}if(n){if(y.onsubmit=function(){return alert(S("JS_WAIT_UPLOAD_FILE")),!1},a.length){var l={upload_fields:a},d="/-/x-api/v1/public/?method=mosaic/anketaGetUploadData&param[form_id]="+plupload.instances[y.getAttribute("data-s3-upload")][0].custom.form_id;e.post(d,l,I)}else P();return!1}return r?(C(),!1):(s&&alert(s3.loc("JS_FORM_REQUIRED_FIELD")),r)}function I(e){if(e.result){var t=e.result,i=plupload.instances[y.getAttribute("data-s3-upload")];for(var n in t)if(t.hasOwnProperty(n)){let e=t[n],r="",s=!1,a="";if(L(e.upload_url)){const{upload_url:t,upload_token:i}=JSON.parse(e.upload_url);r=t,i.length&&(s=!0,a=i)}else r=e.upload_url;const o=e.upload_field,l=s?"files":o,d=U(s,a);i.filter((function(e,t,i){e.custom.tag_id===n&&(i[t].url=r,i[t].settings.url=r,i[t].file_data_name=l,i[t].settings.file_data_name=l,i[t].headers=d,i[t].settings.headers=d)}))}P()}}function P(){try{for(var e in plupload.instances[y.getAttribute("data-s3-upload")])plupload.instances[y.getAttribute("data-s3-upload")][e].start()}catch(e){console.warn(e)}}function D(t){e&&t&&e(t).unbind("submit")}function C(t=""){var i,n,r=!0;for(i in plupload.instances[y.getAttribute("data-s3-upload")])(!1===(n=plupload.instances[y.getAttribute("data-s3-upload")][i]).custom.upload_successful||n.custom.error)&&(r=!1);if(r){for(i in plupload.instances[y.getAttribute("data-s3-upload")]){var s=(n=plupload.instances[y.getAttribute("data-s3-upload")][i]).custom.files;s.length>0&&(n.custom.hiddenUploadInput.value=x(s))}if(t.length){let e=document.createElement("input");e.type="hidden",e.name="token",e.value=t,y.append(e)}y.onsubmit=null,function(t){if(e&&t&&plupload.instances[t.getAttribute("data-s3-upload")])for(var i=0;i<plupload.instances[t.getAttribute("data-s3-upload")].length;i++)if(plupload.instances[t.getAttribute("data-s3-upload")][i].custom.formSubmitEvents)for(var n=0;n<plupload.instances[t.getAttribute("data-s3-upload")][i].custom.formSubmitEvents.length;n++)e(t).submit(plupload.instances[t.getAttribute("data-s3-upload")][i].custom.formSubmitEvents[n])}(y),e?e(y).submit():y.submit()}D(y),y.onsubmit=R}function O(e,t){try{var i=new d(e,this.custom.progress_target);i.setProgress(t),i.setStatus(S("JS_LOADING")),i.toggleCancel(!1)}catch(e){}}function A(e,t){if("string"==typeof t){const e=JSON.parse(t);t=e.result?e.result:e[0]}else t=t.result;const i=void 0!==t.error&&t.error;this.custom.files_upload--;var n=new d(e,this.custom.progress_target);i?(n.setError(),n.setStatus(t.error),n.toggleCancel(!0,this),this.custom.error=!0):(n.setComplete(),n.setStatus(S("JS_COMPLETE")),n.toggleCancel(!1),this.custom.files.push({url:t.filename[0],filename:t.filename[1]}))}function T(e,t){this.custom.files_upload<=0?(this.custom.error||(this.custom.upload_successful=!0),!t&&this.headers&&this.headers.Authorization&&(t=this.headers.Authorization.split(" ")[1]),C.call(this,t)):this.custom.upload_successful=!1}function N(e,t){try{if(b.custom.upload_successful=!1,b.custom.files_count<=0)this.removeFile(e);else{var i=new d(e,t);i.setStatus(S("JS_QUEUED")),i.toggleCancel(!0,this,e),b.custom.files_upload++,b.custom.disableButton(--b.custom.files_count<=0)}}catch(e){}}function L(e){if(!e)return!1;try{JSON.parse(e)}catch(e){return!1}return!0}function U(e,t){return e&&t.length?{Authorization:`bearer ${t}`}:null}"loading"!==document.readyState?w():document.addEventListener("DOMContentLoaded",(function(){w()}))}}}]);